## âœ… Checklist TiÃªu Chuáº©n 5â˜… ToÃ n Diá»‡n cho File `openapi` Service

Má»™t file `openapi` (vÃ­ dá»¥: `openapi.yaml` hoáº·c `openapi.json`) Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ 5 sao cáº§n Ä‘áº£m báº£o cÃ¡c yáº¿u tá»‘ sau, giÃºp Ä‘á»‹nh nghÄ©a há»£p Ä‘á»“ng API má»™t cÃ¡ch rÃµ rÃ ng, chÃ­nh xÃ¡c, dá»… sá»­ dá»¥ng vÃ  dá»… quáº£n lÃ½:

**1. ğŸ“œ Äáº·c Táº£ API HoÃ n Chá»‰nh vÃ  ChÃ­nh XÃ¡c (Completeness & Accuracy of API Specification):**

* [ ] **ThÃ´ng tin chung (Info Object):**
    * [ ] `title`: TÃªn cá»§a API/Service, rÃµ rÃ ng vÃ  mang tÃ­nh mÃ´ táº£.
    * [ ] `version`: PhiÃªn báº£n cá»§a API Ä‘ang Ä‘Æ°á»£c Ä‘áº·c táº£ (vÃ­ dá»¥: `1.0.0`, `1.1-beta`).
    * [ ] `description`: MÃ´ táº£ chi tiáº¿t vá» API, má»¥c Ä‘Ã­ch, cÃ¡c nhÃ³m chá»©c nÄƒng chÃ­nh, vÃ  cÃ¡c lÆ°u Ã½ quan trá»ng cho ngÆ°á»i dÃ¹ng.
    * [ ] `contact` (tÃ¹y chá»n): ThÃ´ng tin liÃªn há»‡ cá»§a Ä‘á»™i ngÅ© phÃ¡t triá»ƒn/chá»§ sá»Ÿ há»¯u API.
* [ ] **ThÃ´ng tin Server & Base Path:** Khai bÃ¡o rÃµ rÃ ng cÃ¡c URL cÆ¡ sá»Ÿ (`servers`) cho cÃ¡c mÃ´i trÆ°á»ng khÃ¡c nhau (dev, staging, production).
* [ ] **Endpoints (Paths & Operations):**
    * [ ] Liá»‡t kÃª Ä‘áº§y Ä‘á»§ táº¥t cáº£ cÃ¡c API endpoints.
    * [ ] Sá»­ dá»¥ng Ä‘Ãºng HTTP methods (`GET`, `POST`, `PUT`, `PATCH`, `DELETE`) cho tá»«ng operation, tuÃ¢n thá»§ ngá»¯ nghÄ©a RESTful.
    * [ ] Má»—i endpoint vÃ  operation cÃ³ `summary` (ngáº¯n gá»n) vÃ  `description` (chi tiáº¿t) rÃµ rÃ ng vá» má»¥c Ä‘Ã­ch vÃ  hÃ nh vi.
    * [ ] TuÃ¢n thá»§ quy Æ°á»›c Ä‘áº·t tÃªn Ä‘Æ°á»ng dáº«n (vÃ­ dá»¥ theo ADR-013).
* [ ] **Tham sá»‘ (Parameters):**
    * [ ] Äá»‹nh nghÄ©a chi tiáº¿t táº¥t cáº£ tham sá»‘: path parameters, query parameters, header parameters.
    * [ ] Cho má»—i tham sá»‘: `name`, vá»‹ trÃ­ (`in`), `description`, `required` (cÃ³ báº¯t buá»™c hay khÃ´ng), `schema` (kiá»ƒu dá»¯ liá»‡u, format, enum, default value), vÃ  `example`.
    * [ ] **Há»— trá»£ Pagination & Filtering cho API GET danh sÃ¡ch:**
        * [ ] ThÃªm cÃ¡c query parameters chuáº©n nhÆ° `page`, `limit` (cho pagination).
        * [ ] CÃ¢n nháº¯c `search` (cho tÃ¬m kiáº¿m tá»± do), `sort_by` (tÃªn trÆ°á»ng), `order` (`asc`/`desc`) (cho sáº¯p xáº¿p).
* [ ] **Ná»™i dung Request (Request Body):**
    * [ ] MÃ´ táº£ rÃµ cáº¥u trÃºc request body (sá»­ dá»¥ng JSON Schema) cho cÃ¡c method nhÆ° `POST`, `PUT`, `PATCH`.
    * [ ] Chá»‰ rÃµ `content type` (vÃ­ dá»¥: `application/json`).
    * [ ] CÃ³ `description` vÃ  `required` cho request body.
    * [ ] Schema cá»§a request body mÃ´ táº£ chi tiáº¿t tá»«ng trÆ°á»ng: tÃªn, kiá»ƒu dá»¯ liá»‡u, rÃ ng buá»™c, `description`, `example`, `readOnly`/`writeOnly` (náº¿u phÃ¹ há»£p).
* [ ] **Ná»™i dung Response (Responses):**
    * [ ] Äáº·c táº£ cáº¥u trÃºc response body chi tiáº¿t (sá»­ dá»¥ng JSON Schema) cho tá»«ng HTTP status code cÃ³ thá»ƒ tráº£ vá» (cáº£ thÃ nh cÃ´ng vÃ  lá»—i).
    * [ ] TuÃ¢n thá»§ cáº¥u trÃºc response chuáº©n cá»§a há»‡ thá»‘ng (vÃ­ dá»¥: `{ data, error, meta }` theo ADR-012).
    * [ ] Schema cá»§a response body mÃ´ táº£ chi tiáº¿t tá»«ng trÆ°á»ng.
    * [ ] Chá»‰ rÃµ `content type`.
    * [ ] **Há»— trá»£ Pagination cho API GET danh sÃ¡ch:**
        * [ ] Sá»­ dá»¥ng schema `Paginated[T]` (hoáº·c tÆ°Æ¡ng Ä‘Æ°Æ¡ng) vá»›i cÃ¡c trÆ°á»ng metadata nhÆ° `meta.total_items`, `meta.page`, `meta.per_page`, `meta.total_pages` trong response.
* [ ] **HTTP Status Codes & MÃ£ lá»—i á»¨ng dá»¥ng:**
    * [ ] Liá»‡t kÃª Ä‘áº§y Ä‘á»§ cÃ¡c HTTP status codes vÃ  Ã½ nghÄ©a cá»§a chÃºng trong context cá»§a tá»«ng API.
    * [ ] Sá»­ dá»¥ng schema `ErrorResponse` chuáº©n hÃ³a (vÃ­ dá»¥: `{ error: { code, message, details }, meta: { ... } }`) cho cÃ¡c response lá»—i, tuÃ¢n thá»§ ADR-011, ADR-012.
* [ ] **Headers:**
    * [ ] Khai bÃ¡o cÃ¡c request headers quan trá»ng (vÃ­ dá»¥: `Authorization`, `X-Tenant-ID`, `Idempotency-Key`).
    * [ ] MÃ´ táº£ cÃ¡c response headers Ä‘áº·c biá»‡t (vÃ­ dá»¥: `X-Request-ID`, `ETag`, `RateLimit-Remaining`).
* [ ] **Tags:**
    * [ ] Sá»­ dá»¥ng `tags` Ä‘á»ƒ nhÃ³m cÃ¡c API má»™t cÃ¡ch logic (vÃ­ dá»¥: `users-global`, `tenants`, `rbac-templates`).
    * [ ] Khai bÃ¡o mÃ´ táº£ cho tá»«ng tag á»Ÿ pháº§n Ä‘áº§u file (`tags:` object array).

**2. ğŸ§© Äá»‹nh nghÄ©a Schema vÃ  TÃ¡i sá»­ dá»¥ng (Schema Definitions & Reusability - `components/schemas`):**

* [ ] **Tá»‘i Æ°u Schema vá»›i `$ref`:** Äáº£m báº£o toÃ n bá»™ request/response body vÃ  cÃ¡c pháº§n láº·p láº¡i cá»§a schema sá»­ dá»¥ng tham chiáº¿u `$ref` Ä‘áº¿n cÃ¡c Ä‘á»‹nh nghÄ©a trong `components/schemas`, trÃ¡nh Ä‘á»‹nh nghÄ©a inline láº·p Ä‘i láº·p láº¡i.
* [ ] **MÃ´ táº£ Schema Chi tiáº¿t:** Má»—i schema trong `components/schemas` pháº£i cÃ³ `description`, `type`, vÃ  `example` (náº¿u phÃ¹ há»£p). CÃ¡c thuá»™c tÃ­nh (properties) cá»§a schema cÅ©ng cáº§n `description` vÃ  `example`.
* [ ] **Sá»­ dá»¥ng `readOnly`/`writeOnly`:** ÄÃ¡nh dáº¥u cÃ¡c trÆ°á»ng chá»‰ Ä‘á»c hoáº·c chá»‰ ghi má»™t cÃ¡ch chÃ­nh xÃ¡c.
* [ ] **Äá»‹nh nghÄ©a ENUM táº­p trung:** Táº¥t cáº£ cÃ¡c ENUM nÃªn Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  cÃ¡c schema riÃªng biá»‡t trong `components/schemas` vÃ  Ä‘Æ°á»£c tham chiáº¿u, thay vÃ¬ hardcode giÃ¡ trá»‹ trá»±c tiáº¿p trong Ä‘áº·c táº£ endpoint.
* [ ] **Sá»­ dá»¥ng `nullable: true` (cho OpenAPI 3.0) hoáº·c `nullable` trong `type` array (cho OpenAPI 3.1+):** Cho cÃ¡c trÆ°á»ng tÃ¹y chá»n cÃ³ thá»ƒ nháº­n giÃ¡ trá»‹ `null`.
* [ ] **Sá»­ dá»¥ng `oneOf`, `allOf`, `anyOf` (náº¿u cáº§n):** Cho cÃ¡c schema phá»©c táº¡p cÃ³ nhiá»u biáº¿n thá»ƒ hoáº·c cáº§n káº¿t há»£p tá»« cÃ¡c schema khÃ¡c.

**3. ğŸ” Báº£o Máº­t vÃ  PhÃ¢n Quyá»n RÃµ RÃ ng (Clear Security & Authorization Definition):**

* [ ] **CÆ¡ cháº¿ xÃ¡c thá»±c (Authentication):** Äá»‹nh nghÄ©a rÃµ rÃ ng cÃ¡c `securitySchemes` Ä‘Æ°á»£c sá»­ dá»¥ng trong `components/securitySchemes` (vÃ­ dá»¥: `bearerAuth` cho JWT). Ãp dá»¥ng security scheme cho toÃ n bá»™ API hoáº·c tá»«ng operation cá»¥ thá»ƒ.
* [ ] **YÃªu cáº§u quyá»n (Permissions/RBAC):**
    * [ ] Sá»­ dá»¥ng custom extension nhÆ° `x-required-permission` Ä‘á»ƒ chá»‰ Ä‘á»‹nh permission cáº§n thiáº¿t cho tá»«ng operation quan trá»ng.
    * [ ] Permission code nÃªn nháº¥t quÃ¡n vÃ  dá»… hiá»ƒu, lÃ½ tÆ°á»Ÿng nháº¥t lÃ  trÃ¹ng vá»›i ENUM hoáº·c háº±ng sá»‘ tá»« há»‡ thá»‘ng RBAC template.

**4. âœ¨ VÃ­ dá»¥ Minh Há»a Thá»±c Táº¿ (Practical Examples):**

* [ ] Cung cáº¥p cÃ¡c vÃ­ dá»¥ (`example` hoáº·c `examples`) phong phÃº cho request parameters, request body, vÃ  response body trong Ä‘áº·c táº£.
* [ ] VÃ­ dá»¥ nÃªn bao gá»“m cáº£ ká»‹ch báº£n thÃ nh cÃ´ng vÃ  má»™t sá»‘ lá»—i thÆ°á»ng gáº·p (náº¿u cÃ³ thá»ƒ, Ä‘áº·c biá»‡t cho cÃ¡c API phá»©c táº¡p).

**5. ğŸ› ï¸ TuÃ¢n Thá»§ Chuáº©n vÃ  CÃ´ng Cá»¥ (Adherence to Standards & Tooling):**

* [ ] **Chuáº©n OpenAPI:** TuÃ¢n thá»§ cháº·t cháº½ phiÃªn báº£n OpenAPI Ä‘Ã£ chá»n (vÃ­ dá»¥: 3.0.3, 3.1.0).
* [ ] **TÃ­nh há»£p lá»‡ (Validation):** File Ä‘áº·c táº£ pháº£i há»£p lá»‡ vÃ  vÆ°á»£t qua kiá»ƒm tra cá»§a cÃ¡c cÃ´ng cá»¥ linter/validator (vÃ­ dá»¥: Spectral).
* [ ] **Kháº£ nÄƒng Sinh Code/Docs:** Viáº¿t theo cÃ¡ch dá»… dÃ ng cho viá»‡c tá»± Ä‘á»™ng sinh client SDKs, server stubs, vÃ  tÃ i liá»‡u API tÆ°Æ¡ng tÃ¡c (vÃ­ dá»¥: Swagger UI, Redoc).
* [ ] **Nháº¥t quÃ¡n vá»›i ADRs há»‡ thá»‘ng:** Pháº£n Ã¡nh Ä‘Ãºng cÃ¡c quyáº¿t Ä‘á»‹nh kiáº¿n trÃºc liÃªn quan Ä‘áº¿n API (vÃ­ dá»¥: ADR-009 API Governance, ADR-011 API Error Format, ADR-012 Response Structure, ADR-013 Path Naming Convention).

**6. ğŸ“„ ThÃ´ng Tin Bá»• Sung vÃ  Quáº£n Trá»‹ (Supplementary Information & Governance):**

* [ ] **ChÃ­nh sÃ¡ch Versioning & Deprecation:** MÃ´ táº£ cÃ¡ch API Ä‘Æ°á»£c version hÃ³a vÃ  chÃ­nh sÃ¡ch loáº¡i bá» phiÃªn báº£n cÅ© (cÃ³ thá»ƒ tham chiáº¿u Ä‘áº¿n ADR liÃªn quan).
* [ ] **ThÃ´ng tin Rate Limiting (náº¿u cÃ³):** MÃ´ táº£ giá»›i háº¡n sá»‘ láº§n gá»i API.
* [ ] **Metadata quáº£n trá»‹ tÃ i liá»‡u:**
    * [ ] Ghi chÃº ngÃ y táº¡o/cáº­p nháº­t, phiÃªn báº£n cá»§a chÃ­nh file OpenAPI (cÃ³ thá»ƒ qua version control cá»§a Git).
    * [ ] ThÃ´ng tin tÃ¡c giáº£, ngÆ°á»i review (cÃ³ thá»ƒ quáº£n lÃ½ ngoÃ i file spec, vÃ­ dá»¥ trong commit history hoáº·c tÃ i liá»‡u Ä‘i kÃ¨m).
* [ ] **LiÃªn káº¿t Ä‘áº¿n tÃ i liá»‡u liÃªn quan:** Trong pháº§n `description` cá»§a API hoáº·c cá»§a Info Object, cÃ³ thá»ƒ cung cáº¥p link Ä‘áº¿n file design chi tiáº¿t, data model, hoáº·c cÃ¡c ADRs liÃªn quan.
* [ ] **Custom Extensions (`x-...`):**
    * [ ] Náº¿u sá»­ dá»¥ng cÃ¡c extension tÃ¹y chá»‰nh (vÃ­ dá»¥: `x-required-permission`, `x-audit-action`, `x-emits-event`), chÃºng cáº§n Ä‘Æ°á»£c giáº£i thÃ­ch rÃµ rÃ ng má»¥c Ä‘Ã­ch vÃ  cÃ¡ch sá»­ dá»¥ng (cÃ³ thá»ƒ trong pháº§n mÃ´ táº£ chung hoáº·c trong má»™t tÃ i liá»‡u hÆ°á»›ng dáº«n riÃªng).
