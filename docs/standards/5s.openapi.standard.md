## âœ… Checklist TiÃªu Chuáº©n 5â˜… cho File `openapi` Service

Má»™t file `openapi` (hoáº·c OpenAPI spec) Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ 5 sao cáº§n Ä‘áº£m báº£o cÃ¡c yáº¿u tá»‘ sau:

**1. ğŸ“œ Äáº·c Táº£ API HoÃ n Chá»‰nh vÃ  ChÃ­nh XÃ¡c (Completeness & Accuracy of API Specification):**

* [ ] **Tá»•ng quan Service:** Má»™t Ä‘oáº¡n mÃ´ táº£ ngáº¯n gá»n vá» service, má»¥c Ä‘Ã­ch chÃ­nh vÃ  cÃ¡c nhÃ³m API mÃ  nÃ³ cung cáº¥p.
* [ ] **ThÃ´ng tin Server & Base Path:** Khai bÃ¡o rÃµ cÃ¡c URL cÆ¡ sá»Ÿ cho cÃ¡c mÃ´i trÆ°á»ng (dev, staging, production).
* [ ] **Endpoints (Paths & Operations):**
    * [ ] Liá»‡t kÃª Ä‘áº§y Ä‘á»§ táº¥t cáº£ cÃ¡c API endpoints (vÃ­ dá»¥: `/users`, `/users/{id}`).
    * [ ] Sá»­ dá»¥ng Ä‘Ãºng HTTP methods (`GET`, `POST`, `PUT`, `PATCH`, `DELETE`) cho tá»«ng operation.
    * [ ] Má»—i endpoint vÃ  operation cÃ³ mÃ´ táº£ (`summary`, `description`) rÃµ rÃ ng vá» má»¥c Ä‘Ã­ch vÃ  hÃ nh vi.
* [ ] **Tham sá»‘ (Parameters):**
    * [ ] Äá»‹nh nghÄ©a chi tiáº¿t táº¥t cáº£ tham sá»‘ (path, query, header).
    * [ ] Cho má»—i tham sá»‘: tÃªn, vá»‹ trÃ­ (`in`), kiá»ƒu dá»¯ liá»‡u (`schema`), cÃ³ báº¯t buá»™c (`required`), mÃ´ táº£, vÃ­ dá»¥.
* [ ] **Ná»™i dung Request (Request Body):**
    * [ ] MÃ´ táº£ rÃµ cáº¥u trÃºc request body (vÃ­ dá»¥: JSON schema) cho cÃ¡c method nhÆ° `POST`, `PUT`, `PATCH`.
    * [ ] Tá»«ng trÆ°á»ng trong body: tÃªn, kiá»ƒu dá»¯ liá»‡u, rÃ ng buá»™c (validation rules), vÃ­ dá»¥.
    * [ ] Chá»‰ rÃµ `content type` (vÃ­ dá»¥: `application/json`).
* [ ] **Ná»™i dung Response (Responses):**
    * [ ] Äáº·c táº£ cáº¥u trÃºc response body chi tiáº¿t cho tá»«ng HTTP status code cÃ³ thá»ƒ tráº£ vá» (cáº£ thÃ nh cÃ´ng vÃ  lá»—i).
    * [ ] TuÃ¢n thá»§ cáº¥u trÃºc response chuáº©n cá»§a há»‡ thá»‘ng (vÃ­ dá»¥: `{ data, error, meta }` theo ADR-012).
    * [ ] MÃ´ táº£ tá»«ng trÆ°á»ng trong response body.
    * [ ] Chá»‰ rÃµ `content type`.
* [ ] **HTTP Status Codes & MÃ£ lá»—i á»¨ng dá»¥ng:**
    * [ ] Liá»‡t kÃª Ä‘áº§y Ä‘á»§ cÃ¡c HTTP status codes vÃ  Ã½ nghÄ©a cá»§a chÃºng trong context cá»§a API.
    * [ ] Náº¿u cÃ³ mÃ£ lá»—i á»©ng dá»¥ng riÃªng (vÃ­ dá»¥ `OTP_EXPIRED` theo ADR-011), chÃºng pháº£i Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a vÃ  liÃªn káº¿t rÃµ rÃ ng.
* [ ] **Headers:**
    * [ ] Khai bÃ¡o cÃ¡c request headers quan trá»ng mÃ  client cáº§n gá»­i (vÃ­ dá»¥: `Authorization`, `X-Tenant-ID`).
    * [ ] MÃ´ táº£ cÃ¡c response headers Ä‘áº·c biá»‡t mÃ  server cÃ³ thá»ƒ tráº£ vá» (vÃ­ dá»¥: `X-Request-ID`, `ETag`).
* [ ] **Tags:** Sá»­ dá»¥ng tags Ä‘á»ƒ nhÃ³m cÃ¡c API má»™t cÃ¡ch logic, giÃºp dá»… Ä‘iá»u hÆ°á»›ng vÃ  tÃ¬m kiáº¿m.

**2. ğŸ” Báº£o Máº­t vÃ  PhÃ¢n Quyá»n RÃµ RÃ ng (Clear Security & Authorization Definition):**

* [ ] **CÆ¡ cháº¿ xÃ¡c thá»±c (Authentication):** Äá»‹nh nghÄ©a rÃµ rÃ ng cÃ¡c security schemes Ä‘Æ°á»£c sá»­ dá»¥ng (vÃ­ dá»¥: `bearerAuth` cho JWT).
* [ ] **YÃªu cáº§u quyá»n (Permissions/RBAC):**
    * [ ] Chá»‰ Ä‘á»‹nh rÃµ rÃ ng cÃ¡c permission hoáº·c role cáº§n thiáº¿t Ä‘á»ƒ gá»i tá»«ng API endpoint.
    * [ ] CÃ³ thá»ƒ sá»­ dá»¥ng custom extension nhÆ° `x-required-permission` (vÃ­ dá»¥: `superadmin.create_user_global` trong `openapi.yaml` cá»§a User Service Master).

**3. âœ¨ VÃ­ dá»¥ Minh Há»a Thá»±c Táº¿ (Practical Examples):**

* [ ] Cung cáº¥p cÃ¡c vÃ­ dá»¥ (`example` hoáº·c `examples` trong OpenAPI) cho request parameters, request body, vÃ  response body.
* [ ] CÃ¡c vÃ­ dá»¥ nÃªn bao gá»“m cáº£ ká»‹ch báº£n thÃ nh cÃ´ng vÃ  má»™t sá»‘ lá»—i thÆ°á»ng gáº·p (náº¿u cÃ³ thá»ƒ).

**4. ğŸ› ï¸ TuÃ¢n Thá»§ Chuáº©n vÃ  CÃ´ng Cá»¥ (Adherence to Standards & Tooling):**

* [ ] **Chuáº©n OpenAPI:** TuÃ¢n thá»§ cháº·t cháº½ phiÃªn báº£n OpenAPI Ä‘Æ°á»£c chá»n (vÃ­ dá»¥: 3.0.x).
* [ ] **TÃ­nh há»£p lá»‡ (Validation):** File Ä‘áº·c táº£ pháº£i há»£p lá»‡ vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c validate báº±ng cÃ¡c cÃ´ng cá»¥ chuáº©n (linters nhÆ° Spectral, validators).
* [ ] **Kháº£ nÄƒng Sinh Code/Docs:** ÄÆ°á»£c viáº¿t theo cÃ¡ch dá»… dÃ ng cho viá»‡c tá»± Ä‘á»™ng sinh client SDKs, server stubs, vÃ  tÃ i liá»‡u API tÆ°Æ¡ng tÃ¡c (vÃ­ dá»¥: Swagger UI, Redoc).
* [ ] **Nháº¥t quÃ¡n vá»›i ADRs há»‡ thá»‘ng:** Pháº£n Ã¡nh Ä‘Ãºng cÃ¡c quyáº¿t Ä‘á»‹nh kiáº¿n trÃºc liÃªn quan Ä‘áº¿n API (vÃ­ dá»¥: ADR-009 API Governance, ADR-011 API Error Format, ADR-012 Response Structure, ADR-013 Path Naming Convention).

**5. ğŸ“„ ThÃ´ng Tin Bá»• Sung vÃ  Quáº£n Trá»‹ (Supplementary Information & Governance):**

* [ ] **ThÃ´ng tin chung (Info Object):**
    * [ ] `title`: TÃªn cá»§a API/Service.
    * [ ] `version`: PhiÃªn báº£n cá»§a API (khÃ¡c vá»›i phiÃªn báº£n cá»§a file OpenAPI spec).
    * [ ] `description`: MÃ´ táº£ chi tiáº¿t vá» API, má»¥c Ä‘Ã­ch, cÃ¡c lÆ°u Ã½ quan trá»ng.
    * [ ] `contact` (tÃ¹y chá»n): ThÃ´ng tin liÃªn há»‡ cá»§a Ä‘á»™i ngÅ© phÃ¡t triá»ƒn/chá»§ sá»Ÿ há»¯u API.
* [ ] **ChÃ­nh sÃ¡ch Versioning & Deprecation:** CÃ¡ch API Ä‘Æ°á»£c version hÃ³a vÃ  chÃ­nh sÃ¡ch loáº¡i bá» phiÃªn báº£n cÅ© (cÃ³ thá»ƒ tham chiáº¿u Ä‘áº¿n ADR liÃªn quan).
* [ ] **Giá»›i háº¡n Rate Limiting (náº¿u cÃ³):** ThÃ´ng tin vá» giá»›i háº¡n sá»‘ láº§n gá»i API.
* [ ] **Metadata quáº£n trá»‹ tÃ i liá»‡u:**
    * [ ] NgÃ y táº¡o/cáº­p nháº­t, phiÃªn báº£n cá»§a chÃ­nh file tÃ i liá»‡u (vÃ­ dá»¥: `last_updated` trong metadata cá»§a file design).
    * [ ] TÃ¡c giáº£, ngÆ°á»i review.
* [ ] **LiÃªn káº¿t Ä‘áº¿n tÃ i liá»‡u liÃªn quan:** VÃ­ dá»¥: link Ä‘áº¿n file design chi tiáº¿t cá»§a service, cÃ¡c ADRs.
* [ ] **Ghi chÃº Ä‘áº·c biá»‡t (Custom Extensions):** Náº¿u cÃ³ sá»­ dá»¥ng cÃ¡c extension tÃ¹y chá»‰nh (vÃ­ dá»¥: `x-audit-action`, `x-emits-event` trong `openapi.yaml` cá»§a User Service Master), chÃºng cáº§n Ä‘Æ°á»£c giáº£i thÃ­ch rÃµ rÃ ng.
