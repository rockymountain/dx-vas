
<!DOCTYPE html>

<html class="no-js" lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="TÃ i liá»‡u kiáº¿n trÃºc vÃ  phÃ¡t triá»ƒn cho dá»± Ã¡n Chuyá»ƒn Ä‘á»•i sá»‘ TrÆ°á»ng Viá»‡t Anh (dx_vas)." name="description"/>
<meta content="DX VAS Team" name="author"/>
<link href="https://dx.truongvietanh.edu.vn/" rel="canonical"/>
<link href="." rel="prev"/>
<link href="architecture/system-diagrams/" rel="next"/>
<link href="assets/images/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.14" name="generator"/>
<title>Home - DX VAS - Docs</title>
<link href="assets/stylesheets/main.342714a4.min.css" rel="stylesheet"/>
<link href="assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="pink" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#tai-lieu-kien-truc-chi-tiet-he-thong-chuyen-oi-so-vas">
          Bá» qua
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Äáº§u trang" class="md-header__inner md-grid">
<a aria-label="DX VAS - Docs" class="md-header__button md-logo" data-md-component="logo" href="." title="DX VAS - Docs">
<img alt="logo" src="assets/images/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DX VAS - Docs
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Home
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="pink" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="lime" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="TÃ¬m kiáº¿m" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="TÃ¬m kiáº¿m" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="TÃ¬m kiáº¿m" class="md-search__options">
<button aria-label="XoÃ¡" class="md-search__icon md-icon" tabindex="-1" title="XoÃ¡" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/rockymountain/dx-vas.git" title="Xem mÃ£ nguá»“n">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    rockymountain/dx-vas
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href=".">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href=".">
          
  
  
    
  
  Kiáº¿n trÃºc Há»‡ thá»‘ng

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="dev/dev-guide/">
          
  
  
    
  
  HÆ°á»›ng dáº«n PhÃ¡t triá»ƒn

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="services/user-service/design/">
          
  
  
    
  
  Thiáº¿t káº¿ Services

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="ADR/">
          
  
  
    
  
  Quyáº¿t Ä‘á»‹nh Kiáº¿n trÃºc (ADRs)

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Thanh Ä‘iá»u hÆ°á»›ng" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DX VAS - Docs" class="md-nav__button md-logo" data-md-component="logo" href="." title="DX VAS - Docs">
<img alt="logo" src="assets/images/logo.png"/>
</a>
    DX VAS - Docs
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/rockymountain/dx-vas.git" title="Xem mÃ£ nguá»“n">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    rockymountain/dx-vas
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Home
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href=".">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
<nav aria-label="Má»¥c lá»¥c" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Má»¥c lá»¥c
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-yeu-cau-du-an">
<span class="md-ellipsis">
      1. YÃªu cáº§u dá»± Ã¡n
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-ang-nhap-phan-quyen-ong-rbac">
<span class="md-ellipsis">
      2. ÄÄƒng nháº­p &amp; PhÃ¢n quyá»n Ä‘á»™ng (RBAC)
    </span>
</a>
<nav aria-label="2. ÄÄƒng nháº­p &amp; PhÃ¢n quyá»n Ä‘á»™ng (RBAC)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mo-hinh-phan-tang-inh-danh-va-rbac">
<span class="md-ellipsis">
      ğŸ”‘ MÃ´ hÃ¬nh phÃ¢n táº§ng Ä‘á»‹nh danh vÃ  RBAC
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#anh-gia-phan-quyen-tai-api-gateway">
<span class="md-ellipsis">
      ğŸ” ÄÃ¡nh giÃ¡ phÃ¢n quyá»n táº¡i API Gateway
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tinh-linh-hoat">
<span class="md-ellipsis">
      ğŸ§­ TÃ­nh linh hoáº¡t
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-auth-service">
<span class="md-ellipsis">
      3. Auth Service
    </span>
</a>
<nav aria-label="3. Auth Service" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#auth-service-master">
<span class="md-ellipsis">
      ğŸ” Auth Service Master
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sub-auth-service-per-tenant">
<span class="md-ellipsis">
      ğŸ” Sub Auth Service (per tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tinh-nang-bao-mat-nang-cao">
<span class="md-ellipsis">
      ğŸ” TÃ­nh nÄƒng báº£o máº­t nÃ¢ng cao
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#luu-y-ve-trien-khai">
<span class="md-ellipsis">
      ğŸ¯ LÆ°u Ã½ vá» triá»ƒn khai:
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-user-service">
<span class="md-ellipsis">
      4. User Service
    </span>
</a>
<nav aria-label="4. User Service" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#user-service-master-tap-trung-toan-he-thong">
<span class="md-ellipsis">
      ğŸ§  User Service Master (Táº­p trung toÃ n há»‡ thá»‘ng)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sub-user-service-cap-tenant-uoc-trien-khai-trong-tung-stack-tenant">
<span class="md-ellipsis">
      ğŸ§© Sub User Service (Cáº¥p tenant â€“ Ä‘Æ°á»£c triá»ƒn khai trong tá»«ng stack tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#co-che-hoat-ong-ien-hinh">
<span class="md-ellipsis">
      ğŸ”„ CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng Ä‘iá»ƒn hÃ¬nh:
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-api-gateway">
<span class="md-ellipsis">
      5. API Gateway
    </span>
</a>
<nav aria-label="5. API Gateway" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#inh-tuyen-theo-tenant">
<span class="md-ellipsis">
      ğŸ§­ Äá»‹nh tuyáº¿n theo Tenant
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kiem-tra-rbac-ong-theo-tenant">
<span class="md-ellipsis">
      ğŸ” Kiá»ƒm tra RBAC Ä‘á»™ng theo tenant
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-request">
<span class="md-ellipsis">
      ğŸ“¦ Forward request
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bao-ve-noi-dung-inh-danh">
<span class="md-ellipsis">
      ğŸ” Báº£o vá»‡ ná»™i dung &amp; Ä‘á»‹nh danh
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-notification-service-multi-tenant-option-b">
<span class="md-ellipsis">
      6. Notification Service (Multi-Tenant â€“ Option B)
    </span>
</a>
<nav aria-label="6. Notification Service (Multi-Tenant â€“ Option B)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phan-tang-dich-vu">
<span class="md-ellipsis">
      ğŸ§­ PhÃ¢n táº§ng dá»‹ch vá»¥
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#luong-gui-thong-bao-toan-he-thong-option-b-event-based">
<span class="md-ellipsis">
      ğŸ”„ Luá»“ng gá»­i thÃ´ng bÃ¡o toÃ n há»‡ thá»‘ng (Option B â€“ Event-based)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#co-che-phong-ngua-rui-ro">
<span class="md-ellipsis">
      âœ… CÆ¡ cháº¿ phÃ²ng ngá»«a rá»§i ro
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7-superadmin-webapp-spa">
<span class="md-ellipsis">
      7. Superadmin Webapp (SPA)
    </span>
</a>
<nav aria-label="7. Superadmin Webapp (SPA)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#chuc-nang-chinh">
<span class="md-ellipsis">
      ğŸ›ï¸ Chá»©c nÄƒng chÃ­nh
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cong-nghe-tich-hop">
<span class="md-ellipsis">
      ğŸ›  CÃ´ng nghá»‡ &amp; tÃ­ch há»£p
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8-ha-tang-trien-khai">
<span class="md-ellipsis">
      8. Háº¡ táº§ng triá»ƒn khai
    </span>
</a>
<nav aria-label="8. Háº¡ táº§ng triá»ƒn khai" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mo-hinh-trien-khai">
<span class="md-ellipsis">
      ğŸ§± MÃ´ hÃ¬nh triá»ƒn khai
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cau-truc-project-gcp-e-xuat">
<span class="md-ellipsis">
      âš™ï¸ Cáº¥u trÃºc Project GCP Ä‘á» xuáº¥t
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cac-cong-nghe-ha-tang-su-dung">
<span class="md-ellipsis">
      â˜ï¸ CÃ¡c cÃ´ng nghá»‡ háº¡ táº§ng sá»­ dá»¥ng
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9-admin-webapp-spa-cap-o-tenant">
<span class="md-ellipsis">
      9. Admin Webapp - SPA (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
<nav aria-label="9. Admin Webapp - SPA (cáº¥p Ä‘á»™ tenant)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ac-iem">
<span class="md-ellipsis">
      ğŸ§© Äáº·c Ä‘iá»ƒm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#chuc-nang-chinh-theo-vai-tro">
<span class="md-ellipsis">
      ğŸ›  Chá»©c nÄƒng chÃ­nh theo vai trÃ²
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phan-quyen-bao-mat-noi-bo">
<span class="md-ellipsis">
      ğŸ”’ PhÃ¢n quyá»n &amp; báº£o máº­t ná»™i bá»™
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10-customer-portal-pwa-cap-o-tenant">
<span class="md-ellipsis">
      10. Customer Portal - PWA (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11-crm-suitecrm-cap-o-tenant">
<span class="md-ellipsis">
      11. CRM â€“ SuiteCRM (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12-sis-gibbon-cap-o-tenant">
<span class="md-ellipsis">
      12. SIS â€“ Gibbon (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13-lms-moodle-cap-o-tenant">
<span class="md-ellipsis">
      13. LMS â€“ Moodle (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14-notification-service">
<span class="md-ellipsis">
      14. Notification Service
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15-zalo-oa-google-chat">
<span class="md-ellipsis">
      15. Zalo OA &amp; Google Chat
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16-cicd-devops">
<span class="md-ellipsis">
      16. CI/CD &amp; DevOps
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17-bao-mat-giam-sat">
<span class="md-ellipsis">
      17. Báº£o máº­t &amp; GiÃ¡m sÃ¡t
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18-data-migration-plan">
<span class="md-ellipsis">
      18. Data Migration Plan
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19-ao-tao-chuyen-giao">
<span class="md-ellipsis">
      19. ÄÃ o táº¡o &amp; Chuyá»ƒn giao
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#20-tong-ket">
<span class="md-ellipsis">
      20. Tá»•ng káº¿t
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-a-danh-sach-quyet-inh-kien-truc-adrs">
<span class="md-ellipsis">
      Phá»¥ lá»¥c A â€“ Danh sÃ¡ch Quyáº¿t Ä‘á»‹nh Kiáº¿n trÃºc (ADRs)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-b-nguyen-tac-kien-truc-cot-loi">
<span class="md-ellipsis">
      Phá»¥ lá»¥c B â€“ NguyÃªn táº¯c Kiáº¿n trÃºc Cá»‘t lÃµi
    </span>
</a>
<nav aria-label="Phá»¥ lá»¥c B â€“ NguyÃªn táº¯c Kiáº¿n trÃºc Cá»‘t lÃµi" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#bo-sung-nguyen-tac-cho-multi-tenant">
<span class="md-ellipsis">
      âœ¨ Bá»• sung nguyÃªn táº¯c cho Multi-Tenant
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-c-so-o-kien-truc">
<span class="md-ellipsis">
      Phá»¥ lá»¥c C â€“ SÆ¡ Ä‘á»“ Kiáº¿n trÃºc
    </span>
</a>
<nav aria-label="Phá»¥ lá»¥c C â€“ SÆ¡ Ä‘á»“ Kiáº¿n trÃºc" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#so-o-tong-quan-kien-truc-multi-tenant">
<span class="md-ellipsis">
      ğŸ§­ SÆ¡ Ä‘á»“ tá»•ng quan kiáº¿n trÃºc multi-tenant
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-d-interface-contracts-ics">
<span class="md-ellipsis">
      Phá»¥ lá»¥c D â€“ Interface Contracts (ICs)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-e-huong-dan-ong-gop-phat-trien">
<span class="md-ellipsis">
      Phá»¥ lá»¥c E â€“ HÆ°á»›ng dáº«n Ä‘Ã³ng gÃ³p &amp; phÃ¡t triá»ƒn
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link md-nav__link--active" href=".">
<span class="md-ellipsis">
    Kiáº¿n trÃºc Há»‡ thá»‘ng
    
  </span>
</a>
<label class="md-nav__link md-nav__link--active" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Kiáº¿n trÃºc Há»‡ thá»‘ng
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="architecture/system-diagrams/">
<span class="md-ellipsis">
    SÆ¡ Ä‘á»“ Há»‡ thá»‘ng
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="architecture/rbac-deep-dive/">
<span class="md-ellipsis">
    RBAC Chi tiáº¿t
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    HÆ°á»›ng dáº«n PhÃ¡t triá»ƒn
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            HÆ°á»›ng dáº«n PhÃ¡t triá»ƒn
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="dev/dev-guide/">
<span class="md-ellipsis">
    Tá»•ng quan PhÃ¡t triá»ƒn (Dev Guide)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="dev/backend-dev-guide/">
<span class="md-ellipsis">
    Backend Dev Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="dev/ops-guide/">
<span class="md-ellipsis">
    Váº­n hÃ nh &amp; DevOps (Ops Guide)
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Thiáº¿t káº¿ Services
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Thiáº¿t káº¿ Services
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    User Service
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            User Service
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="services/user-service/design/">
<span class="md-ellipsis">
    Tá»•ng quan Thiáº¿t káº¿
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="services/user-service/interface-contract/">
<span class="md-ellipsis">
    Há»£p Ä‘á»“ng Giao diá»‡n
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="services/user-service/data-model/">
<span class="md-ellipsis">
    MÃ´ hÃ¬nh Dá»¯ liá»‡u
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="services/user-service/openapi.yaml">
<span class="md-ellipsis">
    Äáº·c táº£ OpenAPI
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="ADR/">
<span class="md-ellipsis">
    Quyáº¿t Ä‘á»‹nh Kiáº¿n trÃºc (ADRs)
    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Quyáº¿t Ä‘á»‹nh Kiáº¿n trÃºc (ADRs)
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Má»¥c lá»¥c" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Má»¥c lá»¥c
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-yeu-cau-du-an">
<span class="md-ellipsis">
      1. YÃªu cáº§u dá»± Ã¡n
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-ang-nhap-phan-quyen-ong-rbac">
<span class="md-ellipsis">
      2. ÄÄƒng nháº­p &amp; PhÃ¢n quyá»n Ä‘á»™ng (RBAC)
    </span>
</a>
<nav aria-label="2. ÄÄƒng nháº­p &amp; PhÃ¢n quyá»n Ä‘á»™ng (RBAC)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mo-hinh-phan-tang-inh-danh-va-rbac">
<span class="md-ellipsis">
      ğŸ”‘ MÃ´ hÃ¬nh phÃ¢n táº§ng Ä‘á»‹nh danh vÃ  RBAC
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#anh-gia-phan-quyen-tai-api-gateway">
<span class="md-ellipsis">
      ğŸ” ÄÃ¡nh giÃ¡ phÃ¢n quyá»n táº¡i API Gateway
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tinh-linh-hoat">
<span class="md-ellipsis">
      ğŸ§­ TÃ­nh linh hoáº¡t
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-auth-service">
<span class="md-ellipsis">
      3. Auth Service
    </span>
</a>
<nav aria-label="3. Auth Service" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#auth-service-master">
<span class="md-ellipsis">
      ğŸ” Auth Service Master
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sub-auth-service-per-tenant">
<span class="md-ellipsis">
      ğŸ” Sub Auth Service (per tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tinh-nang-bao-mat-nang-cao">
<span class="md-ellipsis">
      ğŸ” TÃ­nh nÄƒng báº£o máº­t nÃ¢ng cao
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#luu-y-ve-trien-khai">
<span class="md-ellipsis">
      ğŸ¯ LÆ°u Ã½ vá» triá»ƒn khai:
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-user-service">
<span class="md-ellipsis">
      4. User Service
    </span>
</a>
<nav aria-label="4. User Service" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#user-service-master-tap-trung-toan-he-thong">
<span class="md-ellipsis">
      ğŸ§  User Service Master (Táº­p trung toÃ n há»‡ thá»‘ng)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sub-user-service-cap-tenant-uoc-trien-khai-trong-tung-stack-tenant">
<span class="md-ellipsis">
      ğŸ§© Sub User Service (Cáº¥p tenant â€“ Ä‘Æ°á»£c triá»ƒn khai trong tá»«ng stack tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#co-che-hoat-ong-ien-hinh">
<span class="md-ellipsis">
      ğŸ”„ CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng Ä‘iá»ƒn hÃ¬nh:
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-api-gateway">
<span class="md-ellipsis">
      5. API Gateway
    </span>
</a>
<nav aria-label="5. API Gateway" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#inh-tuyen-theo-tenant">
<span class="md-ellipsis">
      ğŸ§­ Äá»‹nh tuyáº¿n theo Tenant
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kiem-tra-rbac-ong-theo-tenant">
<span class="md-ellipsis">
      ğŸ” Kiá»ƒm tra RBAC Ä‘á»™ng theo tenant
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#forward-request">
<span class="md-ellipsis">
      ğŸ“¦ Forward request
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bao-ve-noi-dung-inh-danh">
<span class="md-ellipsis">
      ğŸ” Báº£o vá»‡ ná»™i dung &amp; Ä‘á»‹nh danh
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-notification-service-multi-tenant-option-b">
<span class="md-ellipsis">
      6. Notification Service (Multi-Tenant â€“ Option B)
    </span>
</a>
<nav aria-label="6. Notification Service (Multi-Tenant â€“ Option B)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phan-tang-dich-vu">
<span class="md-ellipsis">
      ğŸ§­ PhÃ¢n táº§ng dá»‹ch vá»¥
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#luong-gui-thong-bao-toan-he-thong-option-b-event-based">
<span class="md-ellipsis">
      ğŸ”„ Luá»“ng gá»­i thÃ´ng bÃ¡o toÃ n há»‡ thá»‘ng (Option B â€“ Event-based)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#co-che-phong-ngua-rui-ro">
<span class="md-ellipsis">
      âœ… CÆ¡ cháº¿ phÃ²ng ngá»«a rá»§i ro
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7-superadmin-webapp-spa">
<span class="md-ellipsis">
      7. Superadmin Webapp (SPA)
    </span>
</a>
<nav aria-label="7. Superadmin Webapp (SPA)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#chuc-nang-chinh">
<span class="md-ellipsis">
      ğŸ›ï¸ Chá»©c nÄƒng chÃ­nh
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cong-nghe-tich-hop">
<span class="md-ellipsis">
      ğŸ›  CÃ´ng nghá»‡ &amp; tÃ­ch há»£p
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8-ha-tang-trien-khai">
<span class="md-ellipsis">
      8. Háº¡ táº§ng triá»ƒn khai
    </span>
</a>
<nav aria-label="8. Háº¡ táº§ng triá»ƒn khai" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mo-hinh-trien-khai">
<span class="md-ellipsis">
      ğŸ§± MÃ´ hÃ¬nh triá»ƒn khai
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cau-truc-project-gcp-e-xuat">
<span class="md-ellipsis">
      âš™ï¸ Cáº¥u trÃºc Project GCP Ä‘á» xuáº¥t
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cac-cong-nghe-ha-tang-su-dung">
<span class="md-ellipsis">
      â˜ï¸ CÃ¡c cÃ´ng nghá»‡ háº¡ táº§ng sá»­ dá»¥ng
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9-admin-webapp-spa-cap-o-tenant">
<span class="md-ellipsis">
      9. Admin Webapp - SPA (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
<nav aria-label="9. Admin Webapp - SPA (cáº¥p Ä‘á»™ tenant)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ac-iem">
<span class="md-ellipsis">
      ğŸ§© Äáº·c Ä‘iá»ƒm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#chuc-nang-chinh-theo-vai-tro">
<span class="md-ellipsis">
      ğŸ›  Chá»©c nÄƒng chÃ­nh theo vai trÃ²
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phan-quyen-bao-mat-noi-bo">
<span class="md-ellipsis">
      ğŸ”’ PhÃ¢n quyá»n &amp; báº£o máº­t ná»™i bá»™
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10-customer-portal-pwa-cap-o-tenant">
<span class="md-ellipsis">
      10. Customer Portal - PWA (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11-crm-suitecrm-cap-o-tenant">
<span class="md-ellipsis">
      11. CRM â€“ SuiteCRM (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12-sis-gibbon-cap-o-tenant">
<span class="md-ellipsis">
      12. SIS â€“ Gibbon (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13-lms-moodle-cap-o-tenant">
<span class="md-ellipsis">
      13. LMS â€“ Moodle (cáº¥p Ä‘á»™ tenant)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14-notification-service">
<span class="md-ellipsis">
      14. Notification Service
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15-zalo-oa-google-chat">
<span class="md-ellipsis">
      15. Zalo OA &amp; Google Chat
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16-cicd-devops">
<span class="md-ellipsis">
      16. CI/CD &amp; DevOps
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17-bao-mat-giam-sat">
<span class="md-ellipsis">
      17. Báº£o máº­t &amp; GiÃ¡m sÃ¡t
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18-data-migration-plan">
<span class="md-ellipsis">
      18. Data Migration Plan
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19-ao-tao-chuyen-giao">
<span class="md-ellipsis">
      19. ÄÃ o táº¡o &amp; Chuyá»ƒn giao
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#20-tong-ket">
<span class="md-ellipsis">
      20. Tá»•ng káº¿t
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-a-danh-sach-quyet-inh-kien-truc-adrs">
<span class="md-ellipsis">
      Phá»¥ lá»¥c A â€“ Danh sÃ¡ch Quyáº¿t Ä‘á»‹nh Kiáº¿n trÃºc (ADRs)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-b-nguyen-tac-kien-truc-cot-loi">
<span class="md-ellipsis">
      Phá»¥ lá»¥c B â€“ NguyÃªn táº¯c Kiáº¿n trÃºc Cá»‘t lÃµi
    </span>
</a>
<nav aria-label="Phá»¥ lá»¥c B â€“ NguyÃªn táº¯c Kiáº¿n trÃºc Cá»‘t lÃµi" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#bo-sung-nguyen-tac-cho-multi-tenant">
<span class="md-ellipsis">
      âœ¨ Bá»• sung nguyÃªn táº¯c cho Multi-Tenant
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-c-so-o-kien-truc">
<span class="md-ellipsis">
      Phá»¥ lá»¥c C â€“ SÆ¡ Ä‘á»“ Kiáº¿n trÃºc
    </span>
</a>
<nav aria-label="Phá»¥ lá»¥c C â€“ SÆ¡ Ä‘á»“ Kiáº¿n trÃºc" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#so-o-tong-quan-kien-truc-multi-tenant">
<span class="md-ellipsis">
      ğŸ§­ SÆ¡ Ä‘á»“ tá»•ng quan kiáº¿n trÃºc multi-tenant
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-d-interface-contracts-ics">
<span class="md-ellipsis">
      Phá»¥ lá»¥c D â€“ Interface Contracts (ICs)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phu-luc-e-huong-dan-ong-gop-phat-trien">
<span class="md-ellipsis">
      Phá»¥ lá»¥c E â€“ HÆ°á»›ng dáº«n Ä‘Ã³ng gÃ³p &amp; phÃ¡t triá»ƒn
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="tai-lieu-kien-truc-chi-tiet-he-thong-chuyen-oi-so-vas">TÃ€I LIá»†U KIáº¾N TRÃšC CHI TIáº¾T â€“ Há»† THá»NG CHUYá»‚N Äá»”I Sá» VAS<a class="headerlink" href="#tai-lieu-kien-truc-chi-tiet-he-thong-chuyen-oi-so-vas" title="Permanent link">Â¶</a></h1>
<h2 id="1-yeu-cau-du-an">1. YÃªu cáº§u dá»± Ã¡n<a class="headerlink" href="#1-yeu-cau-du-an" title="Permanent link">Â¶</a></h2>
<ul>
<li>
<p><strong>Má»¥c tiÃªu chÃ­nh:</strong> Triá»ƒn khai má»™t há»‡ thá»‘ng chuyá»ƒn Ä‘á»•i sá»‘ toÃ n diá»‡n cho má»™t cÃ´ng ty giÃ¡o dá»¥c quáº£n lÃ½ nhiá»u trÆ°á»ng thÃ nh viÃªn, tÃ­ch há»£p quáº£n lÃ½ há»c sinh, giÃ¡o viÃªn, phá»¥ huynh, lá»›p há»c, há»c phÃ­, thÃ´ng bÃ¡o, há»c táº­p online vÃ  quy trÃ¬nh tuyá»ƒn sinh.</p>
</li>
<li>
<p><strong>MÃ´ hÃ¬nh váº­n hÃ nh:</strong> </p>
</li>
<li>CÃ´ng ty sá»Ÿ há»¯u vÃ  quáº£n lÃ½ <strong>3 trÆ°á»ng thÃ nh viÃªn</strong> (má»—i trÆ°á»ng lÃ  má»™t tenant riÃªng biá»‡t).</li>
<li>
<p>Há»‡ thá»‘ng váº­n hÃ nh theo kiáº¿n trÃºc <strong>multi-tenant</strong>, má»—i tenant cÃ³ stack riÃªng (frontend, adapters, auth/user sub-service), vÃ  dÃ¹ng chung API Gateway &amp; Tenant Master Services.</p>
</li>
<li>
<p><strong>Thiáº¿t káº¿ ban Ä‘áº§u (cho toÃ n há»‡ thá»‘ng):</strong></p>
</li>
<li>1 cÃ´ng ty quáº£n lÃ½ 3 tenant (trÆ°á»ng thÃ nh viÃªn).</li>
<li>
<p>Tá»•ng sá»‘ ngÆ°á»i dÃ¹ng dá»± kiáº¿n:</p>
<ul>
<li><strong>100 nhÃ¢n viÃªn, giÃ¡o viÃªn</strong> (toÃ n há»‡ thá»‘ng)</li>
<li><strong>Tá»« 100 Ä‘áº¿n 600 há»c sinh má»—i trÆ°á»ng</strong> â†’ tá»•ng cá»™ng <strong>khoáº£ng 1000 há»c sinh</strong></li>
<li><strong>Khoáº£ng 1000 phá»¥ huynh</strong>, tÆ°Æ¡ng á»©ng 1:1 vá»›i há»c sinh</li>
</ul>
</li>
<li>
<p><strong>Kháº£ nÄƒng má»Ÿ rá»™ng tá»‘i Ä‘a (gáº¥p 2.5 láº§n):</strong></p>
</li>
<li><strong>250 nhÃ¢n viÃªn, giÃ¡o viÃªn</strong></li>
<li><strong>Tá»‘i Ä‘a 2500 há»c sinh</strong></li>
<li><strong>Tá»‘i Ä‘a 2500 phá»¥ huynh</strong></li>
</ul>
<h2 id="2-ang-nhap-phan-quyen-ong-rbac">2. ÄÄƒng nháº­p &amp; PhÃ¢n quyá»n Ä‘á»™ng (RBAC)<a class="headerlink" href="#2-ang-nhap-phan-quyen-ong-rbac" title="Permanent link">Â¶</a></h2>
<p>Há»‡ thá»‘ng dx-vas sá»­ dá»¥ng kiáº¿n trÃºc RBAC Ä‘á»™ng vá»›i kháº£ nÄƒng multi-tenant. Quyá»n truy cáº­p Ä‘Æ°á»£c kiá»ƒm soÃ¡t chÃ­nh xÃ¡c theo tá»«ng tenant (trÆ°á»ng thÃ nh viÃªn), káº¿t há»£p quáº£n trá»‹ táº­p trung tá»« Master vá»›i kháº£ nÄƒng tÃ¹y biáº¿n cá»¥c bá»™ táº¡i tá»«ng tenant.</p>
<h3 id="mo-hinh-phan-tang-inh-danh-va-rbac">ğŸ”‘ MÃ´ hÃ¬nh phÃ¢n táº§ng Ä‘á»‹nh danh vÃ  RBAC<a class="headerlink" href="#mo-hinh-phan-tang-inh-danh-va-rbac" title="Permanent link">Â¶</a></h3>
<ul>
<li><strong>User Service Master</strong>:</li>
<li>Quáº£n lÃ½ toÃ n bá»™ Ä‘á»‹nh danh ngÆ°á»i dÃ¹ng (<code>users_global</code>)</li>
<li>Duy trÃ¬ thÃ´ng tin <code>tenants</code>, <code>user_tenant_assignments</code></li>
<li>Cung cáº¥p bá»™ <code>global_roles_templates</code> vÃ  <code>global_permissions_templates</code></li>
<li>
<p>Tráº¡ng thÃ¡i <code>is_active</code> toÃ n cá»¥c</p>
</li>
<li>
<p><strong>Sub User Service (per tenant)</strong>:</p>
</li>
<li>Quáº£n lÃ½ RBAC riÃªng biá»‡t cá»§a tenant</li>
<li>Tham chiáº¿u <code>user_id_global</code>, cÃ³ <code>is_active_in_tenant</code></li>
<li>Cho phÃ©p káº¿ thá»«a hoáº·c tuá»³ chá»‰nh role/permission riÃªng</li>
<li>Thá»±c hiá»‡n gÃ¡n vai trÃ², phÃ¢n quyá»n, vÃ  kiá»ƒm tra RBAC trong ná»™i bá»™ tenant</li>
</ul>
<p>ğŸ“˜ Má»i chi tiáº¿t vá» schema, báº£ng, quan há»‡ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a rÃµ trong:
- <a href="./services/user-service/master/data-model.md"><code>user-service/master/data-model.md</code></a>
- <a href="./services/user-service/tenant/data-model.md"><code>user-service/tenant/data-model.md</code></a></p>
<h3 id="anh-gia-phan-quyen-tai-api-gateway">ğŸ” ÄÃ¡nh giÃ¡ phÃ¢n quyá»n táº¡i API Gateway<a class="headerlink" href="#anh-gia-phan-quyen-tai-api-gateway" title="Permanent link">Â¶</a></h3>
<ul>
<li>JWT do Auth Master/Sub cáº¥p, chá»©a <code>user_id</code>, <code>tenant_id</code>, <code>roles</code>, <code>permissions</code></li>
<li>Gateway thá»±c hiá»‡n:</li>
<li>XÃ¡c thá»±c JWT</li>
<li>Kiá»ƒm tra <code>is_active</code> vÃ  <code>is_active_in_tenant</code></li>
<li>Truy váº¥n cache RBAC (theo <code>user_id + tenant_id</code>)</li>
<li>ÄÃ¡nh giÃ¡ Ä‘iá»u kiá»‡n JSONB náº¿u cÃ³ (VD: xem Ä‘iá»ƒm há»c sinh náº¿u cÃ¹ng lá»›p)</li>
</ul>
<h3 id="tinh-linh-hoat">ğŸ§­ TÃ­nh linh hoáº¡t<a class="headerlink" href="#tinh-linh-hoat" title="Permanent link">Â¶</a></h3>
<ul>
<li>Má»™t user cÃ³ thá»ƒ thuá»™c nhiá»u tenant vá»›i vai trÃ² khÃ¡c nhau</li>
<li>Tenant cÃ³ thá»ƒ chá»‰nh sá»­a RBAC riÃªng mÃ  khÃ´ng áº£nh hÆ°á»Ÿng cÃ¡c tenant khÃ¡c</li>
<li>RBAC cache táº¡i Gateway Ä‘Æ°á»£c Ä‘á»“ng bá»™ qua Pub/Sub hoáº·c TTL tá»± Ä‘á»™ng</li>
</ul>
<p>ğŸ“˜ Äá»c thÃªm mÃ´ hÃ¬nh phÃ¢n quyá»n chi tiáº¿t táº¡i: <a href="architecture/rbac-deep-dive/"><code>rbac-deep-dive.md</code></a></p>
<h2 id="3-auth-service">3. Auth Service<a class="headerlink" href="#3-auth-service" title="Permanent link">Â¶</a></h2>
<p>Há»‡ thá»‘ng dx-vas sá»­ dá»¥ng mÃ´ hÃ¬nh xÃ¡c thá»±c Ä‘a táº§ng Ä‘á»ƒ há»— trá»£ multi-tenant, Ä‘á»“ng thá»i Ä‘áº£m báº£o tÃ­nh linh hoáº¡t trong xÃ¡c thá»±c Google OAuth2 vÃ  Local/OTP.</p>
<h3 id="auth-service-master">ğŸ” Auth Service Master<a class="headerlink" href="#auth-service-master" title="Permanent link">Â¶</a></h3>
<ul>
<li>Chá»‹u trÃ¡ch nhiá»‡m xá»­ lÃ½ xÃ¡c thá»±c thÃ´ng qua Google OAuth2 cho toÃ n bá»™ há»‡ thá»‘ng.</li>
<li>Sau khi ngÆ°á»i dÃ¹ng xÃ¡c thá»±c thÃ nh cÃ´ng qua Google, há»‡ thá»‘ng sáº½:</li>
<li>XÃ¡c Ä‘á»‹nh danh sÃ¡ch cÃ¡c tenant mÃ  ngÆ°á»i dÃ¹ng thuá»™c vá».</li>
<li>Náº¿u ngÆ°á»i dÃ¹ng thuá»™c nhiá»u tenant, hiá»ƒn thá»‹ giao diá»‡n chá»n tenant.</li>
<li>Gá»i User Service Master Ä‘á»ƒ kiá»ƒm tra <code>user_id_global</code>, vÃ  xÃ¡c thá»±c xem ngÆ°á»i dÃ¹ng cÃ³ quyá»n truy cáº­p tenant Ä‘Ã£ chá»n khÃ´ng.</li>
<li>Gá»i Sub User Service (cá»§a tenant Ä‘Ã³) Ä‘á»ƒ láº¥y danh sÃ¡ch roles/permissions trong tenant.</li>
<li>PhÃ¡t hÃ nh JWT "Ä‘áº§y Ä‘á»§" chá»©a:<ul>
<li><code>user_id</code></li>
<li><code>tenant_id</code></li>
<li><code>roles</code>, <code>permissions</code></li>
<li><code>auth_provider</code>, <code>exp</code>, <code>trace_id</code>â€¦</li>
</ul>
</li>
</ul>
<h3 id="sub-auth-service-per-tenant">ğŸ” Sub Auth Service (per tenant)<a class="headerlink" href="#sub-auth-service-per-tenant" title="Permanent link">Â¶</a></h3>
<ul>
<li>Triá»ƒn khai riÃªng biá»‡t trong tá»«ng tenant stack.</li>
<li>Xá»­ lÃ½ xÃ¡c thá»±c cho cÃ¡c user sá»­ dá»¥ng:</li>
<li>TÃ i khoáº£n Local (tÃªn Ä‘Äƒng nháº­p/máº­t kháº©u)</li>
<li>OTP (SMS/email)</li>
<li>Sau khi xÃ¡c thá»±c local thÃ nh cÃ´ng:</li>
<li>Gá»i User Service Master Ä‘á»ƒ Ä‘Äƒng kÃ½ ngÆ°á»i dÃ¹ng (náº¿u láº§n Ä‘áº§u) vÃ  nháº­n <code>user_id_global</code>.</li>
<li>Gá»i Sub User Service cá»§a chÃ­nh tenant Ä‘á»ƒ láº¥y RBAC tÆ°Æ¡ng á»©ng.</li>
<li>PhÃ¡t hÃ nh JWT Ä‘áº§y Ä‘á»§ nhÆ° Auth Master.</li>
</ul>
<h3 id="tinh-nang-bao-mat-nang-cao">ğŸ” TÃ­nh nÄƒng báº£o máº­t nÃ¢ng cao<a class="headerlink" href="#tinh-nang-bao-mat-nang-cao" title="Permanent link">Â¶</a></h3>
<ul>
<li>CÆ¡ cháº¿ CAPTCHA vÃ  giá»›i háº¡n sá»‘ láº§n gá»­i OTP theo IP/user.</li>
<li>JWT kÃ½ báº±ng key Ä‘Æ°á»£c luÃ¢n phiÃªn Ä‘á»‹nh ká»³ (theo chÃ­nh sÃ¡ch <a href="ADR/adr-006-auth-strategy/"><code>ADR-006</code></a>).</li>
<li>Há»— trá»£ Ä‘Äƒng xuáº¥t, lÃ m má»›i token (refresh), kiá»ƒm tra trace log Ä‘Äƒng nháº­p.</li>
</ul>
<h3 id="luu-y-ve-trien-khai">ğŸ¯ LÆ°u Ã½ vá» triá»ƒn khai:<a class="headerlink" href="#luu-y-ve-trien-khai" title="Permanent link">Â¶</a></h3>
<ul>
<li>Má»—i tenant cÃ³ thá»ƒ dÃ¹ng Sub Auth Service tÃ¹y chá»n (báº¯t buá»™c náº¿u cÃ³ há»c sinh/phá»¥ huynh khÃ´ng dÃ¹ng Workspace).</li>
<li>Táº¥t cáº£ JWT (ká»ƒ cáº£ tá»« Sub Auth) Ä‘á»u pháº£i tuÃ¢n thá»§ format chuáº©n vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c xÃ¡c minh bá»Ÿi API Gateway.</li>
</ul>
<p>ğŸ“˜ Xem thÃªm: <a href="ADR/adr-006-auth-strategy/">ADR-006 â€“ Auth Strategy</a></p>
<h2 id="4-user-service">4. User Service<a class="headerlink" href="#4-user-service" title="Permanent link">Â¶</a></h2>
<p>User Service trong há»‡ thá»‘ng dx-vas Ä‘Æ°á»£c chia thÃ nh hai cáº¥p Ä‘á»™ Ä‘á»ƒ há»— trá»£ kiáº¿n trÃºc multi-tenant:</p>
<h3 id="user-service-master-tap-trung-toan-he-thong">ğŸ§  User Service Master (Táº­p trung toÃ n há»‡ thá»‘ng)<a class="headerlink" href="#user-service-master-tap-trung-toan-he-thong" title="Permanent link">Â¶</a></h3>
<ul>
<li>LÃ  nÆ¡i <strong>quáº£n lÃ½ Ä‘á»‹nh danh ngÆ°á»i dÃ¹ng toÃ n cá»¥c</strong>:</li>
<li>Báº£ng <code>users_global</code>: má»—i user cÃ³ má»™t <code>user_id</code> duy nháº¥t toÃ n há»‡ thá»‘ng, kÃ¨m <code>auth_provider</code>, <code>email</code>, <code>phone</code>, <code>local_auth_tenant_id</code> (náº¿u lÃ  user local).</li>
<li>Báº£ng <code>tenants</code>: danh sÃ¡ch tenant (trÆ°á»ng thÃ nh viÃªn) Ä‘ang hoáº¡t Ä‘á»™ng.</li>
<li>Báº£ng <code>user_tenant_assignments</code>: Ã¡nh xáº¡ user â†” tenant (ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ thuá»™c nhiá»u tenant).</li>
<li>Tráº¡ng thÃ¡i <code>is_active</code> toÃ n cá»¥c.</li>
<li>Quáº£n lÃ½ bá»™ <strong>template role/permission</strong> dÃ¹ng chung toÃ n há»‡ thá»‘ng (<code>global_roles_templates</code>, <code>global_permissions_templates</code>).</li>
<li>PhÃ¡t sá»± kiá»‡n Pub/Sub (<code>user_assigned_to_tenant</code>, <code>user_info_updated</code>) Ä‘á»ƒ Ä‘á»“ng bá»™ xuá»‘ng Sub User Service.</li>
<li>Cung cáº¥p API quáº£n trá»‹ cho Superadmin:</li>
<li>Táº¡o tenant, gÃ¡n user vÃ o tenant, cáº­p nháº­t thÃ´ng tin Ä‘á»‹nh danh chung.</li>
</ul>
<h3 id="sub-user-service-cap-tenant-uoc-trien-khai-trong-tung-stack-tenant">ğŸ§© Sub User Service (Cáº¥p tenant â€“ Ä‘Æ°á»£c triá»ƒn khai trong tá»«ng stack tenant)<a class="headerlink" href="#sub-user-service-cap-tenant-uoc-trien-khai-trong-tung-stack-tenant" title="Permanent link">Â¶</a></h3>
<ul>
<li>Quáº£n lÃ½ RBAC riÃªng biá»‡t cho tá»«ng tenant:</li>
<li>Báº£ng <code>users_in_tenant</code>: tham chiáº¿u <code>user_id_global</code>, cÃ³ <code>is_active_in_tenant</code>.</li>
<li><code>roles_in_tenant</code>, <code>permissions_in_tenant</code>: káº¿ thá»«a tá»« Master hoáº·c tá»± Ä‘á»‹nh nghÄ©a.</li>
<li>Mapping RBAC: <code>user_role_in_tenant</code>, <code>role_permission_in_tenant</code>.</li>
<li>Truy váº¥n RBAC táº¡i API Gateway dá»±a trÃªn <code>user_id + tenant_id</code>.</li>
<li>Äá»“ng bá»™ hÃ³a dá»¯ liá»‡u tá»« Master thÃ´ng qua Pub/Sub.</li>
<li>Cung cáº¥p API cho Admin tenant Ä‘á»ƒ:</li>
<li>GÃ¡n role cho user trong tenant</li>
<li>Cáº­p nháº­t tráº¡ng thÃ¡i user trong tenant</li>
<li>Xem nháº­t kÃ½ phÃ¢n quyá»n (náº¿u báº­t audit)</li>
</ul>
<h3 id="co-che-hoat-ong-ien-hinh">ğŸ”„ CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng Ä‘iá»ƒn hÃ¬nh:<a class="headerlink" href="#co-che-hoat-ong-ien-hinh" title="Permanent link">Â¶</a></h3>
<ul>
<li>Khi Superadmin gÃ¡n má»™t user vÃ o tenant:</li>
<li>User Service Master ghi nháº­n vÃ  phÃ¡t sá»± kiá»‡n <code>user_assigned_to_tenant</code></li>
<li>Sub User Service cá»§a tenant nháº­n sá»± kiá»‡n vÃ  táº¡o báº£n ghi "shadow user" náº¿u chÆ°a cÃ³</li>
<li>Khi user login thÃ nh cÃ´ng vÃ  chá»n tenant:</li>
<li>Auth Service gá»i Master â†’ kiá»ƒm tra quyá»n truy cáº­p tenant</li>
<li>Gá»i Sub User Service â†’ truy váº¥n RBAC â†’ tráº£ láº¡i Ä‘á»ƒ phÃ¡t hÃ nh JWT</li>
</ul>
<p>ğŸ“˜ Xem chi tiáº¿t cáº¥u trÃºc báº£ng vÃ  luá»“ng táº¡i: <a href="architecture/rbac-deep-dive/"><code>rbac-deep-dive.md</code></a>, <a href="services/user-service/data-model/"><code>user-service/data-model.md</code></a></p>
<h2 id="5-api-gateway">5. API Gateway<a class="headerlink" href="#5-api-gateway" title="Permanent link">Â¶</a></h2>
<p>API Gateway Ä‘Ã³ng vai trÃ² trung tÃ¢m Ä‘iá»u phá»‘i trong kiáº¿n trÃºc dx-vas, Ä‘áº·c biá»‡t trong mÃ´ hÃ¬nh multi-tenant. NÃ³ xá»­ lÃ½ xÃ¡c thá»±c, phÃ¢n quyá»n Ä‘á»™ng (RBAC), Ä‘á»‹nh tuyáº¿n Ä‘áº¿n Ä‘Ãºng tenant stack, vÃ  báº£o vá»‡ cÃ¡c backend ná»™i bá»™.</p>
<h3 id="inh-tuyen-theo-tenant">ğŸ§­ Äá»‹nh tuyáº¿n theo Tenant<a class="headerlink" href="#inh-tuyen-theo-tenant" title="Permanent link">Â¶</a></h3>
<ul>
<li>Gateway phá»¥c vá»¥ nhiá»u tenant (trÆ°á»ng thÃ nh viÃªn) trÃªn cÃ¹ng má»™t entrypoint.</li>
<li><strong>Tenant Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh qua má»™t trong ba cÃ¡ch:</strong></li>
<li><code>tenant_id</code> trong JWT (Æ°u tiÃªn)</li>
<li>Domain/subdomain cá»§a Frontend App (VD: <code>abc.truongvietanh.edu.vn</code>)</li>
<li>
<p>Tham sá»‘ <code>tenant</code> trong URL (fallback, dÃ¹ng trong mÃ´i trÆ°á»ng phÃ¡t triá»ƒn)</p>
</li>
<li>
<p>Dá»±a vÃ o <code>tenant_id</code>, Gateway sáº½:</p>
</li>
<li>Forward request Ä‘áº¿n <strong>Sub Adapter / Sub Service</strong> Ä‘Ãºng tenant.</li>
<li>Hoáº·c Ä‘áº¿n <strong>Tenant Master Service</strong> náº¿u request thuá»™c vá» Superadmin Webapp.</li>
</ul>
<h3 id="kiem-tra-rbac-ong-theo-tenant">ğŸ” Kiá»ƒm tra RBAC Ä‘á»™ng theo tenant<a class="headerlink" href="#kiem-tra-rbac-ong-theo-tenant" title="Permanent link">Â¶</a></h3>
<ul>
<li>Gateway thá»±c hiá»‡n xÃ¡c thá»±c JWT:</li>
<li>Do Auth Master hoáº·c Sub Auth Service phÃ¡t hÃ nh.</li>
<li>
<p>Pháº£i chá»©a: <code>user_id</code>, <code>tenant_id</code>, <code>roles</code>, <code>permissions</code>, <code>auth_provider</code>.</p>
</li>
<li>
<p>Kiá»ƒm tra tráº¡ng thÃ¡i ngÆ°á»i dÃ¹ng:</p>
</li>
<li><code>is_active</code> toÃ n cá»¥c (tá»« User Service Master)</li>
<li>
<p><code>is_active_in_tenant</code> (tá»« Sub User Service)</p>
</li>
<li>
<p>Truy váº¥n Redis cache Ä‘á»ƒ láº¥y <code>permissions</code> gáº¯n theo <code>tenant_id</code>.</p>
</li>
<li>Evaluate <code>condition</code> (náº¿u cÃ³) theo context request (VD: <code>student_id</code>, <code>class_id</code>...)</li>
</ul>
<h3 id="forward-request">ğŸ“¦ Forward request<a class="headerlink" href="#forward-request" title="Permanent link">Â¶</a></h3>
<ul>
<li>Náº¿u pass: Gateway forward request Ä‘áº¿n backend service Ä‘Ãºng tenant:</li>
<li>Gáº¯n cÃ¡c header: <code>X-User-ID</code>, <code>X-Tenant-ID</code>, <code>X-Permissions</code>, <code>X-Role</code>, <code>X-Trace-ID</code>, <code>X-Auth-Method</code></li>
<li>Náº¿u fail: Tráº£ lá»—i 403 hoáº·c 401 tÃ¹y trÆ°á»ng há»£p.</li>
</ul>
<h3 id="bao-ve-noi-dung-inh-danh">ğŸ” Báº£o vá»‡ ná»™i dung &amp; Ä‘á»‹nh danh<a class="headerlink" href="#bao-ve-noi-dung-inh-danh" title="Permanent link">Â¶</a></h3>
<ul>
<li>CÃ¡c header Ä‘á»‹nh danh Ä‘Æ°á»£c kÃ½ (<code>X-Signature</code>) hoáº·c chá»‰ forward trong ná»™i bá»™ (mTLS).</li>
<li>Backend service KHÃ”NG Ä‘Æ°á»£c cháº¥p nháº­n header Ä‘á»‹nh danh náº¿u request tá»« bÃªn ngoÃ i Gateway.</li>
</ul>
<p>ğŸ“˜ SÆ¡ Ä‘á»“ Ä‘Ã¡nh giÃ¡ RBAC xem chi tiáº¿t táº¡i: ğŸ‘‰ <a href="architecture/system-diagrams/#4-rbac-evaluation-flow--luá»“ng-Ä‘Ã¡nh-giÃ¡-phÃ¢n-quyá»n-Ä‘á»™ng">RBAC Evaluation Flow â€“ System Diagrams</a></p>
<h2 id="6-notification-service-multi-tenant-option-b">6. Notification Service (Multi-Tenant â€“ Option B)<a class="headerlink" href="#6-notification-service-multi-tenant-option-b" title="Permanent link">Â¶</a></h2>
<p>Notification Service trong kiáº¿n trÃºc dx-vas Ä‘Æ°á»£c triá»ƒn khai theo mÃ´ hÃ¬nh phÃ¢n táº§ng, há»— trá»£ gá»­i thÃ´ng bÃ¡o cÃ¡ch ly theo tenant vÃ  broadcast toÃ n há»‡ thá»‘ng báº±ng kiáº¿n trÃºc báº¥t Ä‘á»“ng bá»™ qua Pub/Sub.</p>
<h3 id="phan-tang-dich-vu">ğŸ§­ PhÃ¢n táº§ng dá»‹ch vá»¥<a class="headerlink" href="#phan-tang-dich-vu" title="Permanent link">Â¶</a></h3>
<h4 id="sub-notification-service-per-tenant">ğŸ”¹ Sub Notification Service (per Tenant)<a class="headerlink" href="#sub-notification-service-per-tenant" title="Permanent link">Â¶</a></h4>
<ul>
<li>Má»—i tenant cÃ³ má»™t instance Notification Service riÃªng trong stack cá»§a mÃ¬nh.</li>
<li><strong>Chá»©c nÄƒng:</strong></li>
<li>Gá»­i thÃ´ng bÃ¡o ná»™i bá»™ cá»§a tenant (há»c phÃ­, Ä‘iá»ƒm danh, v.v.)</li>
<li>Quáº£n lÃ½ template riÃªng (<code>notification_templates_in_tenant</code>)</li>
<li>Sá»­ dá»¥ng cáº¥u hÃ¬nh kÃªnh riÃªng: Zalo OA, Gmail API, Google Chat webhook</li>
<li>Ghi log theo dÃµi gá»­i thÃ´ng bÃ¡o (<code>notification_logs_in_tenant</code>)</li>
<li><strong>Láº¯ng nghe Pub/Sub:</strong> Subscribe vÃ o topic <code>vas-global-notifications-topic</code>, lá»c vÃ  xá»­ lÃ½ cÃ¡c thÃ´ng bÃ¡o toÃ n há»‡ thá»‘ng náº¿u phÃ¹ há»£p <code>tenant_id</code>.</li>
</ul>
<h4 id="notification-service-master-shared-core">ğŸ”¹ Notification Service Master (Shared Core)<a class="headerlink" href="#notification-service-master-shared-core" title="Permanent link">Â¶</a></h4>
<ul>
<li>Phá»¥c vá»¥ Superadmin Webapp.</li>
<li><strong>Chá»©c nÄƒng:</strong></li>
<li>Gá»­i thÃ´ng bÃ¡o toÃ n há»‡ thá»‘ng hoáº·c Ä‘áº¿n má»™t nhÃ³m trÆ°á»ng.</li>
<li>PhÃ¡t sá»± kiá»‡n <code>global_notification_requested</code> lÃªn Pub/Sub vá»›i:<ul>
<li><code>target_tenant_ids</code> hoáº·c tiÃªu chÃ­ lá»c (VD: <code>target_user_roles</code>)</li>
<li><code>message_id</code>, ná»™i dung gá»‘c, <code>correlation_id</code></li>
</ul>
</li>
<li>KhÃ´ng can thiá»‡p chi tiáº¿t xá»­ lÃ½ táº¡i cÃ¡c tenant.</li>
<li>Thu tháº­p tráº¡ng thÃ¡i gá»­i tá»« cÃ¡c Sub Service thÃ´ng qua sá»± kiá»‡n pháº£n há»“i <code>tenant_notification_batch_status</code>.</li>
</ul>
<hr/>
<h3 id="luong-gui-thong-bao-toan-he-thong-option-b-event-based">ğŸ”„ Luá»“ng gá»­i thÃ´ng bÃ¡o toÃ n há»‡ thá»‘ng (Option B â€“ Event-based)<a class="headerlink" href="#luong-gui-thong-bao-toan-he-thong-option-b-event-based" title="Permanent link">Â¶</a></h3>
<ol>
<li>Superadmin gá»­i yÃªu cáº§u thÃ´ng bÃ¡o â†’ Notification Service Master nháº­n.</li>
<li>Master publish sá»± kiá»‡n lÃªn topic <code>vas-global-notifications-topic</code>.</li>
<li>CÃ¡c Sub Notification Service subscribe topic:</li>
<li>Lá»c theo <code>tenant_id</code>, xá»­ lÃ½ náº¿u phÃ¹ há»£p.</li>
<li>Gá»­i thÃ´ng bÃ¡o báº±ng kÃªnh riÃªng.</li>
<li>Gá»­i sá»± kiá»‡n pháº£n há»“i <code>tenant_notification_batch_status</code> lÃªn topic <code>vas-tenant-notification-ack-topic</code>.</li>
</ol>
<hr/>
<h3 id="co-che-phong-ngua-rui-ro">âœ… CÆ¡ cháº¿ phÃ²ng ngá»«a rá»§i ro<a class="headerlink" href="#co-che-phong-ngua-rui-ro" title="Permanent link">Â¶</a></h3>
<table>
<thead>
<tr>
<th>Rá»§i ro</th>
<th>PhÃ²ng ngá»«a</th>
</tr>
</thead>
<tbody>
<tr>
<td>KhÃ´ng theo dÃµi Ä‘Æ°á»£c tráº¡ng thÃ¡i gá»­i</td>
<td>Sub gá»­i sá»± kiá»‡n pháº£n há»“i, Master hoáº·c má»™t Monitor Service thu tháº­p &amp; log</td>
</tr>
<tr>
<td>Gá»­i trÃ¹ng thÃ´ng bÃ¡o (non-idempotent)</td>
<td>DÃ¹ng <code>message_id</code> duy nháº¥t + kiá»ƒm tra <code>processed_global_notifications</code></td>
</tr>
<tr>
<td>Sub xá»­ lÃ½ nháº§m sá»± kiá»‡n khÃ´ng dÃ nh cho mÃ¬nh</td>
<td>Payload chá»©a rÃµ <code>target_tenant_ids</code>, Sub lá»c ká»¹</td>
</tr>
<tr>
<td>Sub quÃ¡ táº£i khi nháº­n nhiá»u sá»± kiá»‡n</td>
<td>Giá»›i háº¡n Pub/Sub <code>flow control</code> + xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™ ná»™i bá»™</td>
</tr>
<tr>
<td>Lá»—i cáº¥u hÃ¬nh kÃªnh gá»­i</td>
<td>Sub log lá»—i rÃµ, phÃ¡t sá»± kiá»‡n pháº£n há»“i vá»›i tráº¡ng thÃ¡i lá»—i cá»¥ thá»ƒ</td>
</tr>
<tr>
<td>Dead Letter Topic bá»‹ Ä‘áº§y do lá»—i láº·p láº¡i</td>
<td>GiÃ¡m sÃ¡t DLT, cÃ³ quy trÃ¬nh re-publish sau fix logic</td>
</tr>
</tbody>
</table>
<hr/>
<p>ğŸ“¦ CÃ¡c thÃ nh pháº§n dá»¯ liá»‡u liÃªn quan:</p>
<ul>
<li><code>notification_templates_in_tenant</code></li>
<li><code>channel_configs_in_tenant</code></li>
<li><code>notification_logs_in_tenant</code></li>
<li><code>global_notification_requested</code> (Pub/Sub)</li>
<li><code>tenant_notification_batch_status</code> (Pub/Sub ACK)</li>
<li><code>processed_global_notifications</code> (DB Sub)</li>
</ul>
<h2 id="7-superadmin-webapp-spa">7. Superadmin Webapp (SPA)<a class="headerlink" href="#7-superadmin-webapp-spa" title="Permanent link">Â¶</a></h2>
<p>Superadmin Webapp lÃ  á»©ng dá»¥ng quáº£n trá»‹ táº­p trung dÃ nh riÃªng cho Ä‘á»™i ngÅ© quáº£n lÃ½ cáº¥p cÃ´ng ty â€“ nÆ¡i Ä‘iá»u hÃ nh toÃ n bá»™ há»‡ thá»‘ng dx-vas Ä‘a tenant.</p>
<h3 id="chuc-nang-chinh">ğŸ›ï¸ Chá»©c nÄƒng chÃ­nh<a class="headerlink" href="#chuc-nang-chinh" title="Permanent link">Â¶</a></h3>
<ul>
<li>Quáº£n lÃ½ danh sÃ¡ch tenant (trÆ°á»ng thÃ nh viÃªn):</li>
<li>Táº¡o/sá»­a tenant má»›i, kÃ­ch hoáº¡t/khÃ³a tenant</li>
<li>Cáº¥u hÃ¬nh káº¿t ná»‘i CRM/SIS/LMS cho tá»«ng tenant</li>
<li>GÃ¡n ngÆ°á»i dÃ¹ng vÃ o tenant:</li>
<li>Chá»n user tá»« danh sÃ¡ch toÃ n cá»¥c</li>
<li>Chá»n tenant vÃ  gÃ¡n vai trÃ² ban Ä‘áº§u</li>
<li>Gá»­i lá»i má»i/OTP tá»›i ngÆ°á»i dÃ¹ng náº¿u cáº§n</li>
<li>Quáº£n lÃ½ role/permission toÃ n há»‡ thá»‘ng:</li>
<li>XÃ¢y dá»±ng <strong>Global Role/Permission Templates</strong></li>
<li>Xem cÃ¡c tenant Ä‘ang dÃ¹ng template nÃ o</li>
<li>Clone/cáº­p nháº­t/cáº£nh bÃ¡o náº¿u tenant chá»‰nh sá»­a vÆ°á»£t chuáº©n</li>
<li>Quáº£n lÃ½ thÃ´ng tin Ä‘á»‹nh danh ngÆ°á»i dÃ¹ng:</li>
<li>TÃ¬m kiáº¿m user toÃ n há»‡ thá»‘ng</li>
<li>Kiá»ƒm tra há» thuá»™c tenant nÃ o, vai trÃ² gÃ¬, tráº¡ng thÃ¡i</li>
<li>VÃ´ hiá»‡u hÃ³a tÃ i khoáº£n toÃ n cá»¥c hoáº·c theo tá»«ng tenant</li>
<li>Tá»•ng há»£p vÃ  theo dÃµi thá»‘ng kÃª toÃ n há»‡ thá»‘ng:</li>
<li>Sá»‘ lÆ°á»£ng há»c sinh/nhÃ¢n sá»± theo tá»«ng tenant</li>
<li>Log hoáº¡t Ä‘á»™ng toÃ n há»‡ thá»‘ng</li>
<li>BÃ¡o cÃ¡o phÃ¢n quyá»n, truy cáº­p, Ä‘Äƒng nháº­p, chi phÃ­ (náº¿u cáº§n)</li>
</ul>
<h3 id="cong-nghe-tich-hop">ğŸ›  CÃ´ng nghá»‡ &amp; tÃ­ch há»£p<a class="headerlink" href="#cong-nghe-tich-hop" title="Permanent link">Â¶</a></h3>
<ul>
<li>SPA cháº¡y trÃªn domain riÃªng (<code>superadmin.truongvietanh.edu.vn</code>)</li>
<li>ÄÄƒng nháº­p qua Google OAuth2 (yÃªu cáº§u quyá»n <code>superadmin</code>)</li>
<li>Gá»i API trá»±c tiáº¿p Ä‘áº¿n <strong>User Service Master</strong>, <strong>Auth Master</strong>, vÃ  cÃ¡c Tenant Registry Services</li>
<li>Káº¿t ná»‘i Ä‘áº¿n cÃ¡c service quáº£n lÃ½ chi phÃ­, logging, audit táº­p trung</li>
</ul>
<p>ğŸ“˜ CÃ¡c API Ä‘Æ°á»£c mÃ´ táº£ trong: <a href="./interfaces/ic-superadmin-webapp.md"><code>ic-superadmin-webapp.md</code></a></p>
<h2 id="8-ha-tang-trien-khai">8. Háº¡ táº§ng triá»ƒn khai<a class="headerlink" href="#8-ha-tang-trien-khai" title="Permanent link">Â¶</a></h2>
<p>Há»‡ thá»‘ng dx-vas Ä‘Æ°á»£c triá»ƒn khai trÃªn Google Cloud theo mÃ´ hÃ¬nh <strong>multi-tenant tÃ¡ch biá»‡t theo stack</strong>, káº¿t há»£p vá»›i cÃ¡c thÃ nh pháº§n dÃ¹ng chung Ä‘á»ƒ tá»‘i Æ°u hoÃ¡ báº£o máº­t, kháº£ nÄƒng má»Ÿ rá»™ng vÃ  quáº£n trá»‹ táº­p trung.</p>
<h3 id="mo-hinh-trien-khai">ğŸ§± MÃ´ hÃ¬nh triá»ƒn khai<a class="headerlink" href="#mo-hinh-trien-khai" title="Permanent link">Â¶</a></h3>
<h4 id="shared-core-dung-chung-toan-he-thong">ğŸ“Œ Shared Core (dÃ¹ng chung toÃ n há»‡ thá»‘ng)<a class="headerlink" href="#shared-core-dung-chung-toan-he-thong" title="Permanent link">Â¶</a></h4>
<ul>
<li><strong>API Gateway:</strong> Trung tÃ¢m Ä‘iá»u phá»‘i request, xÃ¡c thá»±c, phÃ¢n quyá»n Ä‘á»™ng RBAC.</li>
<li><strong>Auth Service Master:</strong> Xá»­ lÃ½ Google OAuth2, phÃ¡t hÃ nh JWT Ä‘a tenant.</li>
<li><strong>User Service Master:</strong> Quáº£n lÃ½ Ä‘á»‹nh danh ngÆ°á»i dÃ¹ng toÃ n cá»¥c, tenant registry, RBAC templates.</li>
<li><strong>Superadmin Webapp:</strong> Quáº£n trá»‹ toÃ n bá»™ há»‡ thá»‘ng (tenant, ngÆ°á»i dÃ¹ng, RBAC templates, bÃ¡o cÃ¡o).</li>
<li><strong>Shared Redis Cluster:</strong> Cache RBAC theo <code>user_id + tenant_id</code> (theo namespace).</li>
<li><strong>Monitoring &amp; Audit Stack:</strong> Logging, tracing, SLO cho toÃ n bá»™ há»‡ thá»‘ng.</li>
<li><strong>Pub/Sub Bus:</strong> Truyá»n sá»± kiá»‡n tá»« Master xuá»‘ng cÃ¡c tenant stack.</li>
</ul>
<h4 id="tenant-stack-trien-khai-rieng-biet-cho-tung-truong-thanh-vien">ğŸ« Tenant Stack (triá»ƒn khai riÃªng biá»‡t cho tá»«ng trÆ°á»ng thÃ nh viÃªn)<a class="headerlink" href="#tenant-stack-trien-khai-rieng-biet-cho-tung-truong-thanh-vien" title="Permanent link">Â¶</a></h4>
<p>Má»—i tenant (trÆ°á»ng) Ä‘Æ°á»£c triá»ƒn khai dÆ°á»›i dáº¡ng <strong>má»™t stack riÃªng biá»‡t</strong> trÃªn Google Cloud Run, bao gá»“m:</p>
<ul>
<li><strong>Frontend Apps riÃªng (PWA + Admin SPA)</strong>:</li>
<li>Cháº¡y theo domain cá»§a tá»«ng trÆ°á»ng: <code>abc.truongvietanh.edu.vn</code>, <code>xyz.truongvietanh.edu.vn</code></li>
<li><strong>Sub Auth Service</strong>:</li>
<li>XÃ¡c thá»±c Local/OTP (phá»¥ huynh, há»c sinh) Ä‘á»™c láº­p theo tenant</li>
<li><strong>Sub User Service</strong>:</li>
<li>Quáº£n lÃ½ RBAC riÃªng, mapping Ä‘áº¿n <code>user_id_global</code>, kiá»ƒm soÃ¡t <code>is_active_in_tenant</code></li>
<li><strong>CRM/SIS/LMS Adapter riÃªng</strong>:</li>
<li>Káº¿t ná»‘i Ä‘áº¿n há»‡ thá»‘ng legacy cá»§a tá»«ng trÆ°á»ng (SuiteCRM, Gibbon, Moodle)</li>
<li><strong>Database riÃªng hoáº·c schema phÃ¢n vÃ¹ng (náº¿u dÃ¹ng chung Cloud SQL)</strong></li>
<li><strong>Logging riÃªng, giÃ¡m sÃ¡t riÃªng theo <code>tenant_id</code> vÃ  <code>env</code></strong></li>
</ul>
<h3 id="cau-truc-project-gcp-e-xuat">âš™ï¸ Cáº¥u trÃºc Project GCP Ä‘á» xuáº¥t<a class="headerlink" href="#cau-truc-project-gcp-e-xuat" title="Permanent link">Â¶</a></h3>
<table>
<thead>
<tr>
<th>Project</th>
<th>Má»¥c Ä‘Ã­ch</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dx-vas-core</code></td>
<td>Shared Core Services (API Gateway, Auth/User Master, PubSub, Redis...)</td>
</tr>
<tr>
<td><code>dx-vas-network</code></td>
<td>Shared VPC, NAT, DNS ná»™i bá»™</td>
</tr>
<tr>
<td><code>dx-vas-tenant-abc</code></td>
<td>Stack riÃªng cho tenant ABC</td>
</tr>
<tr>
<td><code>dx-vas-tenant-xyz</code></td>
<td>Stack riÃªng cho tenant XYZ</td>
</tr>
<tr>
<td><code>dx-vas-monitoring</code></td>
<td>Stack táº­p trung cho logging, metrics, alerting</td>
</tr>
<tr>
<td><code>dx-vas-data</code></td>
<td>Cloud SQL, GCS, BigQuery dÃ¹ng chung hoáº·c phÃ¢n vÃ¹ng</td>
</tr>
</tbody>
</table>
<h3 id="cac-cong-nghe-ha-tang-su-dung">â˜ï¸ CÃ¡c cÃ´ng nghá»‡ háº¡ táº§ng sá»­ dá»¥ng<a class="headerlink" href="#cac-cong-nghe-ha-tang-su-dung" title="Permanent link">Â¶</a></h3>
<ul>
<li><strong>Cloud Run:</strong> Triá»ƒn khai serverless cho táº¥t cáº£ services</li>
<li><strong>Cloud SQL:</strong> PostgreSQL (core), MySQL (adapter)</li>
<li><strong>Redis (MemoryStore):</strong> RBAC caching</li>
<li><strong>Cloud Pub/Sub:</strong> Äá»“ng bá»™ Ä‘á»‹nh danh giá»¯a master â†” tenant</li>
<li><strong>Cloud Monitoring &amp; Logging:</strong> SLO/SLA tracking</li>
<li><strong>Terraform:</strong> MÃ´ hÃ¬nh hoÃ¡ háº¡ táº§ng theo module (<code>core</code>, <code>tenant</code>, <code>shared</code>)</li>
</ul>
<p>ğŸ“˜ SÆ¡ Ä‘á»“ triá»ƒn khai xem táº¡i: ğŸ‘‰ <a href="architecture/system-diagrams/#9-deployment-overview-diagram--sÆ¡-Ä‘á»“-triá»ƒn-khai-tá»•ng-quan">Deployment Overview Diagram</a></p>
<h2 id="9-admin-webapp-spa-cap-o-tenant">9. Admin Webapp - SPA (cáº¥p Ä‘á»™ tenant)<a class="headerlink" href="#9-admin-webapp-spa-cap-o-tenant" title="Permanent link">Â¶</a></h2>
<p>Admin Webapp lÃ  á»©ng dá»¥ng quáº£n trá»‹ ná»™i bá»™ dÃ nh riÃªng cho tá»«ng trÆ°á»ng thÃ nh viÃªn (tenant). ÄÃ¢y lÃ  giao diá»‡n chÃ­nh Ä‘á»ƒ giÃ¡o viÃªn, nhÃ¢n viÃªn vÃ  ban giÃ¡m hiá»‡u quáº£n lÃ½ hoáº¡t Ä‘á»™ng há»c táº­p, váº­n hÃ nh vÃ  phá»‘i há»£p giá»¯a cÃ¡c bá»™ pháº­n trong trÆ°á»ng.</p>
<h3 id="ac-iem">ğŸ§© Äáº·c Ä‘iá»ƒm<a class="headerlink" href="#ac-iem" title="Permanent link">Â¶</a></h3>
<ul>
<li><strong>Triá»ƒn khai Ä‘á»™c láº­p cho tá»«ng tenant:</strong></li>
<li>CÃ³ domain riÃªng, vÃ­ dá»¥: <code>admin.abcschool.edu.vn</code>, <code>admin.xyzschool.edu.vn</code></li>
<li>
<p>Káº¿t ná»‘i vá»›i cÃ¡c service backend riÃªng: CRM/SIS/LMS Adapter, Sub User Service, Sub Auth Service</p>
</li>
<li>
<p><strong>ÄÄƒng nháº­p:</strong></p>
</li>
<li>NhÃ¢n viÃªn, giÃ¡o viÃªn sá»­ dá»¥ng Google OAuth2 (qua Auth Master)</li>
<li>Má»™t sá»‘ tenant cÃ³ thá»ƒ cho phÃ©p Local login (tÃ¹y cáº¥u hÃ¬nh Sub Auth Service)</li>
</ul>
<h3 id="chuc-nang-chinh-theo-vai-tro">ğŸ›  Chá»©c nÄƒng chÃ­nh theo vai trÃ²<a class="headerlink" href="#chuc-nang-chinh-theo-vai-tro" title="Permanent link">Â¶</a></h3>
<ul>
<li><strong>GiÃ¡o viÃªn:</strong></li>
<li>Quáº£n lÃ½ lá»›p giáº£ng dáº¡y, Ä‘iá»ƒm danh, nháº­p Ä‘iá»ƒm</li>
<li>Xem thá»i khÃ³a biá»ƒu, nháº­n thÃ´ng bÃ¡o</li>
<li>
<p>Gá»­i pháº£n há»“i tá»›i phá»¥ huynh/há»c sinh</p>
</li>
<li>
<p><strong>NhÃ¢n viÃªn há»c vá»¥ / káº¿ toÃ¡n:</strong></p>
</li>
<li>Quáº£n lÃ½ há»“ sÆ¡ há»c sinh</li>
<li>Cáº­p nháº­t há»c phÃ­, tÃ¬nh tráº¡ng Ä‘Ã³ng tiá»n</li>
<li>
<p>Thá»‘ng kÃª sÄ© sá»‘, Ä‘iá»ƒm sá»‘, bÃ¡o cÃ¡o Ä‘á»‹nh ká»³</p>
</li>
<li>
<p><strong>Admin trÆ°á»ng (BGH):</strong></p>
</li>
<li>GÃ¡n vai trÃ² cho nhÃ¢n sá»± trong tenant</li>
<li>Quáº£n lÃ½ phÃ¢n quyá»n ná»™i bá»™ (RBAC tenant)</li>
<li>Káº¿t ná»‘i CRM/SIS/LMS náº¿u Ä‘Æ°á»£c phÃ©p</li>
<li>Theo dÃµi nháº­t kÃ½ hoáº¡t Ä‘á»™ng cá»§a user trong trÆ°á»ng</li>
</ul>
<h3 id="phan-quyen-bao-mat-noi-bo">ğŸ”’ PhÃ¢n quyá»n &amp; báº£o máº­t ná»™i bá»™<a class="headerlink" href="#phan-quyen-bao-mat-noi-bo" title="Permanent link">Â¶</a></h3>
<ul>
<li>Dá»±a trÃªn RBAC tá»« <strong>Sub User Service</strong>, quyá»n Ä‘Æ°á»£c cáº¥p theo vai trÃ² trong tá»«ng tenant</li>
<li>Backend chá»‰ xá»­ lÃ½ request cÃ³ <code>X-Tenant-ID</code>, <code>X-User-ID</code> vÃ  <code>X-Permissions</code> do API Gateway cáº¥p phÃ¡t</li>
<li>Má»i thao tÃ¡c quáº£n trá»‹ Ä‘Æ°á»£c ghi log vÃ  trace theo <code>tenant_id</code> Ä‘á»ƒ phá»¥c vá»¥ audit</li>
</ul>
<p>ğŸ“˜ CÃ¡c API backend sá»­ dá»¥ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a táº¡i: <a href="services/user-service/interface-contract/"><code>user-service/interface-contract.md</code></a></p>
<h2 id="10-customer-portal-pwa-cap-o-tenant">10. Customer Portal - PWA (cáº¥p Ä‘á»™ tenant)<a class="headerlink" href="#10-customer-portal-pwa-cap-o-tenant" title="Permanent link">Â¶</a></h2>
<ul>
<li>Giao diá»‡n cho phá»¥ huynh vÃ  há»c sinh.</li>
<li>Há»— trá»£ OTP/Zalo login, cÃ i Ä‘áº·t trÃªn mobile, offline vá»›i cache gáº§n nháº¥t.</li>
<li>Cháº¿ Ä‘á»™ offline chá»‰ cho phÃ©p Ä‘á»c dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c cache trÆ°á»›c Ä‘Ã³.</li>
<li>Äá»“ng bá»™ láº¡i dá»¯ liá»‡u tá»± Ä‘á»™ng khi cÃ³ káº¿t ná»‘i máº¡ng.</li>
</ul>
<h2 id="11-crm-suitecrm-cap-o-tenant">11. CRM â€“ SuiteCRM (cáº¥p Ä‘á»™ tenant)<a class="headerlink" href="#11-crm-suitecrm-cap-o-tenant" title="Permanent link">Â¶</a></h2>
<ul>
<li>Quáº£n lÃ½ pipeline tuyá»ƒn sinh.</li>
<li>Khi phá»¥ huynh Ä‘Äƒng kÃ½ nháº­p há»c thÃ nh cÃ´ng â†’ tá»± chuyá»ƒn sang SIS.</li>
<li>Giao tiáº¿p qua API Gateway, kiá»ƒm soÃ¡t RBAC.</li>
<li>Káº¿ hoáº¡ch chuyá»ƒn Ä‘á»•i cÆ¡ cháº¿ Ä‘á»“ng bá»™ sang event-driven, dÃ¹ng Pub/Sub hoáº·c Redis stream.</li>
</ul>
<h2 id="12-sis-gibbon-cap-o-tenant">12. SIS â€“ Gibbon (cáº¥p Ä‘á»™ tenant)<a class="headerlink" href="#12-sis-gibbon-cap-o-tenant" title="Permanent link">Â¶</a></h2>
<ul>
<li>Quáº£n lÃ½ há»c sinh, lá»›p, Ä‘iá»ƒm danh, há»c phÃ­.</li>
<li>CÃ³ export API cho LMS, Portal, Admin Webapp.</li>
<li>LÆ°u váº¿t lá»‹ch sá»­: há»c lá»±c, lá»›p há»c, há»c báº¡.</li>
<li>LiÃªn káº¿t phá»¥ huynh â€“ há»c sinh lÆ°u trong báº£ng tham chiáº¿u.</li>
</ul>
<h2 id="13-lms-moodle-cap-o-tenant">13. LMS â€“ Moodle (cáº¥p Ä‘á»™ tenant)<a class="headerlink" href="#13-lms-moodle-cap-o-tenant" title="Permanent link">Â¶</a></h2>
<ul>
<li>Há»c táº­p online, giao bÃ i, cháº¥m Ä‘iá»ƒm.</li>
<li>SSO vá»›i OAuth2.</li>
<li>Tá»± Ä‘á»™ng Ä‘á»“ng bá»™ há»c sinh tá»« SIS.</li>
<li>Äiá»ƒm cÃ³ thá»ƒ Ä‘áº©y ngÆ°á»£c vá» SIS.</li>
</ul>
<h2 id="14-notification-service">14. Notification Service<a class="headerlink" href="#14-notification-service" title="Permanent link">Â¶</a></h2>
<ul>
<li>Gá»­i thÃ´ng bÃ¡o Web, Email (Gmail API), Zalo OA, Google Chat.</li>
<li>Phá»¥ huynh nháº­n thÃ´ng bÃ¡o qua Zalo/Email.</li>
<li>Há»c sinh, giÃ¡o viÃªn nháº­n qua WebPush/Google Chat.</li>
<li>NgÆ°á»i dÃ¹ng chá»n kÃªnh Æ°a thÃ­ch qua giao diá»‡n.</li>
<li>TÃ­ch há»£p A/B testing vÃ  tracking náº¿u cáº§n.</li>
</ul>
<h2 id="15-zalo-oa-google-chat">15. Zalo OA &amp; Google Chat<a class="headerlink" href="#15-zalo-oa-google-chat" title="Permanent link">Â¶</a></h2>
<ul>
<li>Gá»­i thÃ´ng bÃ¡o há»c phÃ­, sá»± kiá»‡n qua Zalo ZNS.</li>
<li>Gá»­i ná»™i bá»™ (giÃ¡o viÃªn, nhÃ¢n viÃªn) qua Google Chat.</li>
<li>CÃ³ xá»­ lÃ½ lá»—i API, quota, timeout.</li>
<li>Dá»± kiáº¿n bá»• sung cÆ¡ cháº¿ retry vÃ  dashboard kiá»ƒm tra tráº¡ng thÃ¡i gá»­i.</li>
</ul>
<h2 id="16-cicd-devops">16. CI/CD &amp; DevOps<a class="headerlink" href="#16-cicd-devops" title="Permanent link">Â¶</a></h2>
<ul>
<li>GitHub Actions / Cloud Build â†’ Cloud Run.</li>
<li>Staging + production, rollback.</li>
<li>Test tá»± Ä‘á»™ng: unit, integration, End-to-End (E2E), vÃ  contract testing (Pact).</li>
<li>ÄÃ£ Ã¡p dá»¥ng ADR-003 â€“ secrets Ä‘Æ°á»£c quáº£n lÃ½ vÃ  rotate Ä‘á»‹nh ká»³ qua Secret Manager.</li>
<li>Dá»± kiáº¿n triá»ƒn khai Chaos Testing cho cÃ¡c dá»‹ch vá»¥ quan trá»ng.</li>
</ul>
<h2 id="17-bao-mat-giam-sat">17. Báº£o máº­t &amp; GiÃ¡m sÃ¡t<a class="headerlink" href="#17-bao-mat-giam-sat" title="Permanent link">Â¶</a></h2>
<ul>
<li>MÃ£ hÃ³a dá»¯ liá»‡u nháº¡y cáº£m.</li>
<li>Chá»‘ng OWASP Top 10, bao gá»“m CSRF, XSS, SQL Injection.</li>
<li>Triá»ƒn khai xÃ¡c thá»±c Ä‘a yáº¿u tá»‘ (MFA) cho cÃ¡c tÃ i khoáº£n quáº£n trá»‹ vÃ  nhÃ¢n viÃªn quyá»n cao.</li>
<li>GiÃ¡m sÃ¡t xÃ¡c thá»±c phá»¥ huynh (login rate, reset máº­t kháº©u).</li>
<li>Ghi log chi tiáº¿t theo ngÆ°á»i dÃ¹ng, endpoint, tráº¡ng thÃ¡i.</li>
</ul>
<h2 id="18-data-migration-plan">18. Data Migration Plan<a class="headerlink" href="#18-data-migration-plan" title="Permanent link">Â¶</a></h2>
<ul>
<li>
<p>Náº¿u cÃ³ há»‡ thá»‘ng cÅ©, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c di chuyá»ƒn theo lá»™ trÃ¬nh Blueprint rÃµ rÃ ng:</p>
</li>
<li>
<p>Mapping báº£ng dá»¯ liá»‡u</p>
</li>
<li>Kiá»ƒm tra cháº¥t lÆ°á»£ng dá»¯ liá»‡u (data quality)</li>
<li>Kiá»ƒm thá»­ trÆ°á»›c vÃ  sau khi migrate</li>
<li>Rollback plan náº¿u phÃ¡t hiá»‡n lá»—i</li>
<li>Há»— trá»£ cháº¿ Ä‘á»™ song song (parallel run)</li>
</ul>
<h2 id="19-ao-tao-chuyen-giao">19. ÄÃ o táº¡o &amp; Chuyá»ƒn giao<a class="headerlink" href="#19-ao-tao-chuyen-giao" title="Permanent link">Â¶</a></h2>
<ul>
<li>Má»—i nhÃ³m ngÆ°á»i dÃ¹ng sáº½ cÃ³ gÃ³i Ä‘Ã o táº¡o riÃªng (nhÃ¢n viÃªn, giÃ¡o viÃªn, há»c sinh, phá»¥ huynh).</li>
<li>
<p>TÃ i liá»‡u bao gá»“m:</p>
</li>
<li>
<p>Video ngáº¯n</p>
</li>
<li>Handout dáº¡ng PDF</li>
<li>Demo trá»±c tiáº¿p (live/recorded)</li>
</ul>
<h2 id="20-tong-ket">20. Tá»•ng káº¿t<a class="headerlink" href="#20-tong-ket" title="Permanent link">Â¶</a></h2>
<p>Há»‡ thá»‘ng chuyá»ƒn Ä‘á»•i sá»‘ VAS Ä‘Æ°á»£c thiáº¿t káº¿ má»Ÿ rá»™ng linh hoáº¡t Ä‘áº¿n 5260 ngÆ°á»i dÃ¹ng, há»— trá»£ xÃ¡c thá»±c phÃ¢n tÃ¡ch giá»¯a ngÆ°á»i dÃ¹ng cÃ³ Workspace (OAuth2) vÃ  phá»¥ huynh (Local/OTP), Ä‘áº£m báº£o báº£o máº­t, giÃ¡m sÃ¡t, phá»¥c há»“i tháº£m há»a, Ä‘Ã o táº¡o vÃ  kháº£ nÄƒng phÃ¡t triá»ƒn dÃ i háº¡n.</p>
<p>ToÃ n bá»™ cÃ¡c pháº£n há»“i chiáº¿n lÆ°á»£c tá»« anh Bill Ä‘Ã£ Ä‘Æ°á»£c Ä‘Æ°a vÃ o káº¿ hoáº¡ch hÃ nh Ä‘á»™ng vÃ  roadmap triá»ƒn khai â€“ Ä‘áº·c biá»‡t cÃ¡c khÃ­a cáº¡nh RBAC UI, Data Sync, OTP Security, Offline PWA, DR Planning vÃ  Data Migration Ä‘Ã£ Ä‘Æ°á»£c chuáº©n bá»‹ cá»¥ thá»ƒ vÃ  ghi nháº­n trong README.md nÃ y nhÆ° má»™t tÃ i liá»‡u trung tÃ¢m sá»‘ng cá»§a dá»± Ã¡n.</p>
<hr/>
<h2 id="phu-luc-a-danh-sach-quyet-inh-kien-truc-adrs">Phá»¥ lá»¥c A â€“ Danh sÃ¡ch Quyáº¿t Ä‘á»‹nh Kiáº¿n trÃºc (ADRs)<a class="headerlink" href="#phu-luc-a-danh-sach-quyet-inh-kien-truc-adrs" title="Permanent link">Â¶</a></h2>
<p>Dá»± Ã¡n dx-vas sá»­ dá»¥ng cÃ¡c Quyáº¿t Ä‘á»‹nh Kiáº¿n trÃºc (Architecture Decision Records - ADRs) Ä‘á»ƒ ghi láº¡i nhá»¯ng lá»±a chá»n thiáº¿t káº¿ quan trá»ng vá» máº·t kiáº¿n trÃºc, bao gá»“m lÃ½ do, bá»‘i cáº£nh vÃ  cÃ¡c phÆ°Æ¡ng Ã¡n Ä‘Ã£ Ä‘Æ°á»£c cÃ¢n nháº¯c.</p>
<p>ğŸ“˜ Äá»ƒ xem danh sÃ¡ch Ä‘áº§y Ä‘á»§ vÃ  chi tiáº¿t cÃ¡c ADRs Ä‘Ã£ Ä‘Æ°á»£c phÃª duyá»‡t, vui lÃ²ng truy cáº­p: ğŸ‘‰ <a href="ADR/">Danh sÃ¡ch ADRs cá»§a dá»± Ã¡n</a></p>
<hr/>
<h2 id="phu-luc-b-nguyen-tac-kien-truc-cot-loi">Phá»¥ lá»¥c B â€“ NguyÃªn táº¯c Kiáº¿n trÃºc Cá»‘t lÃµi<a class="headerlink" href="#phu-luc-b-nguyen-tac-kien-truc-cot-loi" title="Permanent link">Â¶</a></h2>
<p>Há»‡ thá»‘ng dx-vas Ä‘Æ°á»£c thiáº¿t káº¿ theo cÃ¡c nguyÃªn táº¯c ná»n táº£ng Ä‘á»ƒ Ä‘áº£m báº£o má»Ÿ rá»™ng linh hoáº¡t, báº£o máº­t, tá»‘i Æ°u tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng vÃ  váº­n hÃ nh bá»n vá»¯ng:</p>
<ul>
<li><strong>UX-first:</strong> Æ¯u tiÃªn tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng (Ä‘áº·c biá»‡t phá»¥ huynh khÃ´ng rÃ nh cÃ´ng nghá»‡)</li>
<li><strong>Modular-first:</strong> Thiáº¿t káº¿ há»‡ thá»‘ng dáº¡ng microservice â€“ dá»… thay tháº¿, triá»ƒn khai riÃªng ráº½</li>
<li><strong>Security-by-Design:</strong> TÃ­ch há»£p báº£o máº­t tá»« Ä‘áº§u vÃ o thiáº¿t káº¿ (CSRF, RBAC, MFA, kÃ½ Ä‘á»‹nh danh)</li>
<li><strong>Data Consistency &gt; Availability:</strong> Trong mÃ´i trÆ°á»ng giÃ¡o dá»¥c, dá»¯ liá»‡u Ä‘Ãºng quan trá»ng hÆ¡n pháº£n há»“i nhanh</li>
<li><strong>Infra-as-Code:</strong> Háº¡ táº§ng vÃ  CI/CD Ä‘á»u Ä‘Æ°á»£c mÃ´ hÃ¬nh hÃ³a, kiá»ƒm soÃ¡t báº±ng mÃ£ nguá»“n</li>
</ul>
<h3 id="bo-sung-nguyen-tac-cho-multi-tenant">âœ¨ Bá»• sung nguyÃªn táº¯c cho Multi-Tenant<a class="headerlink" href="#bo-sung-nguyen-tac-cho-multi-tenant" title="Permanent link">Â¶</a></h3>
<ul>
<li><strong>Multi-Tenant by Isolation:</strong></li>
<li>Má»—i tenant cÃ³ frontend, adapters, auth vÃ  user service riÃªng</li>
<li>KhÃ´ng chia sáº» database náº¿u khÃ´ng cÃ³ cÆ¡ cháº¿ phÃ¢n vÃ¹ng/tenant ID rÃµ rÃ ng</li>
<li>
<p>Cho phÃ©p mÃ´ hÃ¬nh tÃ¡ch stack theo tenant, Ä‘á»“ng thá»i táº­n dá»¥ng tÃ i nguyÃªn shared core</p>
</li>
<li>
<p><strong>Centralized Identity &amp; Governance:</strong></p>
</li>
<li>Má»™t User Service Master duy nháº¥t lÃ  nÆ¡i kiá»ƒm soÃ¡t Ä‘á»‹nh danh ngÆ°á»i dÃ¹ng</li>
<li>Superadmin cÃ³ toÃ n quyá»n Ä‘iá»u phá»‘i, gÃ¡n ngÆ°á»i dÃ¹ng vÃ o cÃ¡c tenant, quáº£n lÃ½ templates RBAC</li>
<li>
<p>Má»i stack tenant pháº£i tuÃ¢n theo chuáº©n JWT, RBAC schema vÃ  audit Ä‘á»‹nh danh</p>
</li>
<li>
<p><strong>Pluggable Tenant Stack:</strong></p>
</li>
<li>Má»—i tenant lÃ  má»™t khá»‘i Ä‘á»™c láº­p cÃ³ thá»ƒ Ä‘Æ°á»£c báº­t/táº¯t/destroy mÃ  khÃ´ng áº£nh hÆ°á»Ÿng há»‡ thá»‘ng cÃ²n láº¡i</li>
<li>
<p>Dá»… dÃ ng onboarding tenant má»›i báº±ng quy trÃ¬nh tá»± Ä‘á»™ng hÃ³a Terraform + CI/CD</p>
</li>
<li>
<p><strong>Auditability &amp; Traceability Across Tenants:</strong></p>
</li>
<li>Má»i action phÃ¢n quyá»n, truy cáº­p, login pháº£i Ä‘Æ°á»£c log theo <code>tenant_id</code> + <code>user_id</code></li>
<li>CÃ¡c thay Ä‘á»•i RBAC, kÃ­ch hoáº¡t/deactivate ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c trace toÃ n há»‡ thá»‘ng</li>
</ul>
<p>ğŸ“˜ CÃ¡c quyáº¿t Ä‘á»‹nh kiáº¿n trÃºc liÃªn quan Ä‘Æ°á»£c mÃ´ táº£ trong:<br/>
- <a href="ADR/adr-007-rbac/">ADR-007: RBAC Strategy</a><br/>
- <a href="ADR/adr-006-auth-strategy/">ADR-006: Auth Strategy</a><br/>
- <a href="ADR/adr-019-project-layout/">ADR-019: GCP Project Layout</a><br/>
- <a href="ADR/adr-015-deployment-strategy/">ADR-015: Deployment Strategy</a></p>
<hr/>
<h2 id="phu-luc-c-so-o-kien-truc">Phá»¥ lá»¥c C â€“ SÆ¡ Ä‘á»“ Kiáº¿n trÃºc<a class="headerlink" href="#phu-luc-c-so-o-kien-truc" title="Permanent link">Â¶</a></h2>
<p>ğŸ“ CÃ¡c sÆ¡ Ä‘á»“ kiáº¿n trÃºc há»‡ thá»‘ng Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  cáº­p nháº­t chi tiáº¿t táº¡i: ğŸ‘‰ <a href="architecture/system-diagrams/">System Diagrams</a></p>
<p>TÃ i liá»‡u nÃ y bao gá»“m:
- SÆ¡ Ä‘á»“ tá»•ng quan há»‡ thá»‘ng
- SÆ¡ Ä‘á»“ kiáº¿n trÃºc multi-tenant
- CÃ¡c luá»“ng nghiá»‡p vá»¥ chÃ­nh (tuyá»ƒn sinh, thÃ´ng bÃ¡o, phÃ¢n quyá»n, xÃ¡c thá»±câ€¦)
- SÆ¡ Ä‘á»“ vÃ²ng Ä‘á»i tÃ i khoáº£n
- SÆ¡ Ä‘á»“ triá»ƒn khai háº¡ táº§ng trÃªn Google Cloud
- ChÃº giáº£i vÃ  hÆ°á»›ng dáº«n Ä‘á»c sÆ¡ Ä‘á»“</p>
<h3 id="so-o-tong-quan-kien-truc-multi-tenant">ğŸ§­ SÆ¡ Ä‘á»“ tá»•ng quan kiáº¿n trÃºc multi-tenant<a class="headerlink" href="#so-o-tong-quan-kien-truc-multi-tenant" title="Permanent link">Â¶</a></h3>
<pre class="mermaid"><code>flowchart TD
  subgraph Tenant_A["Tenant A Stack"]
    A_PWA[PWA A]
    A_Admin[Admin SPA A]
    A_Auth[Sub Auth A]
    A_User[Sub User A]
    A_CRM[CRM Adapter A]
    A_SIS[SIS Adapter A]
    A_LMS[LMS Adapter A]
  end

  subgraph Tenant_B["Tenant B Stack"]
    B_PWA[PWA B]
    B_Admin[Admin SPA B]
    B_Auth[Sub Auth B]
    B_User[Sub User B]
    B_CRM[CRM Adapter B]
    B_SIS[SIS Adapter B]
    B_LMS[LMS Adapter B]
  end

  subgraph Master["Shared Core Services"]
    Gateway[API Gateway]
    AuthMaster[Auth Service Master]
    UserMaster[User Service Master]
    Superadmin[Superadmin Webapp]
    Redis[Redis Cache]
    PubSub[Pub/Sub]
    Logging[Monitoring &amp; Audit]
  end

  A_PWA --&gt; Gateway
  A_Admin --&gt; Gateway
  B_PWA --&gt; Gateway
  B_Admin --&gt; Gateway

  Gateway --&gt; AuthMaster
  Gateway --&gt; UserMaster
  Gateway --&gt; Redis
  Gateway --&gt; Logging

  Gateway --&gt; A_Auth
  Gateway --&gt; A_User
  Gateway --&gt; A_CRM
  Gateway --&gt; A_SIS
  Gateway --&gt; A_LMS

  Gateway --&gt; B_Auth
  Gateway --&gt; B_User
  Gateway --&gt; B_CRM
  Gateway --&gt; B_SIS
  Gateway --&gt; B_LMS

  AuthMaster --&gt; UserMaster
  A_Auth --&gt; UserMaster
  B_Auth --&gt; UserMaster

  Superadmin --&gt; UserMaster
</code></pre>
<p>ğŸ“Œ <strong>Ã nghÄ©a sÆ¡ Ä‘á»“</strong>:</p>
<ul>
<li><strong>Gateway</strong> lÃ  trung tÃ¢m Ä‘iá»u phá»‘i, phÃ¢n quyá»n vÃ  Ä‘á»‹nh tuyáº¿n theo <code>tenant_id</code>.</li>
<li>Má»—i tenant cÃ³ <strong>stack riÃªng biá»‡t hoÃ n toÃ n</strong>, Ä‘á»™c láº­p vá» frontend, adapters vÃ  phÃ¢n quyá»n ná»™i bá»™.</li>
<li>CÃ¡c khá»‘i <strong>Master</strong> lÃ  dá»‹ch vá»¥ dÃ¹ng chung, duy trÃ¬ táº­p trung danh tÃ­nh, phÃ¢n quyá»n máº«u vÃ  Ä‘iá»u phá»‘i toÃ n há»‡ thá»‘ng.</li>
<li>Superadmin Webapp tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i cÃ¡c dá»‹ch vá»¥ Master Ä‘á»ƒ Ä‘iá»u hÃ nh toÃ n bá»™ kiáº¿n trÃºc.</li>
</ul>
<p>ğŸ“˜ Äá»ƒ xem Ä‘áº§y Ä‘á»§ cÃ¡c sÆ¡ Ä‘á»“ chi tiáº¿t hÆ¡n (RBAC, Auth, Lifecycle, Sync...), truy cáº­p: <a href="architecture/system-diagrams/">system-diagrams.md</a></p>
<hr/>
<h2 id="phu-luc-d-interface-contracts-ics">Phá»¥ lá»¥c D â€“ Interface Contracts (ICs)<a class="headerlink" href="#phu-luc-d-interface-contracts-ics" title="Permanent link">Â¶</a></h2>
<p>Táº¥t cáº£ cÃ¡c dá»‹ch vá»¥ trong há»‡ thá»‘ng dx-vas Ä‘á»u cÃ³ tÃ i liá»‡u Ä‘á»‹nh nghÄ©a giao tiáº¿p (Interface Contracts), sá»­ dá»¥ng Ä‘á»‹nh dáº¡ng Markdown mÃ´ táº£ OpenAPI hoáº·c UI behavior.</p>
<p>ğŸ“ CÃ¡c tÃ i liá»‡u IC Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i thÆ° má»¥c: <a href="./interfaces/"><code>interfaces</code></a></p>
<table>
<thead>
<tr>
<th>Dá»‹ch vá»¥</th>
<th>MÃ´ táº£</th>
<th>File IC</th>
</tr>
</thead>
<tbody>
<tr>
<td>API Gateway</td>
<td>Cá»•ng vÃ o trung tÃ¢m cá»§a há»‡ thá»‘ng, xá»­ lÃ½ xÃ¡c thá»±c vÃ  kiá»ƒm tra RBAC</td>
<td><a href="interfaces/ic-01-api-gateway/"><code>ic-01-api-gateway.md</code></a></td>
</tr>
<tr>
<td>Admin Webapp</td>
<td>á»¨ng dá»¥ng quáº£n trá»‹ ná»™i bá»™ cho nhÃ¢n viÃªn vÃ  giÃ¡o viÃªn</td>
<td><a href="interfaces/ic-02-admin-webapp/"><code>ic-02-admin-webapp.md</code></a></td>
</tr>
<tr>
<td>Customer Portal</td>
<td>PWA dÃ nh cho phá»¥ huynh vÃ  há»c sinh</td>
<td><a href="interfaces/ic-03-customer-portal/"><code>ic-03-customer-portal.md</code></a></td>
</tr>
<tr>
<td>Notification Service</td>
<td>Dá»‹ch vá»¥ gá»­i thÃ´ng bÃ¡o Ä‘a kÃªnh (Web, Email, Zalo, Chat)</td>
<td><a href="interfaces/ic-04-notification/"><code>ic-04-notification.md</code></a></td>
</tr>
<tr>
<td>CRM Adapter</td>
<td>Giao tiáº¿p vá»›i SuiteCRM trong quÃ¡ trÃ¬nh tuyá»ƒn sinh</td>
<td><a href="interfaces/ic-05-crm/"><code>ic-05-crm.md</code></a></td>
</tr>
<tr>
<td>SIS Adapter</td>
<td>Giao tiáº¿p vá»›i há»‡ thá»‘ng Gibbon SIS</td>
<td><a href="interfaces/ic-06-sis/"><code>ic-06-sis.md</code></a></td>
</tr>
<tr>
<td>LMS Adapter</td>
<td>Giao tiáº¿p vá»›i há»‡ thá»‘ng Moodle LMS</td>
<td><a href="interfaces/ic-07-lms/"><code>ic-07-lms.md</code></a></td>
</tr>
<tr>
<td>Auth Service</td>
<td>Dá»‹ch vá»¥ xÃ¡c thá»±c vÃ  phÃ¡t hÃ nh token (OAuth2, OTP)</td>
<td><a href="interfaces/ic-08-auth-service/"><code>ic-08-auth-service.md</code></a></td>
</tr>
<tr>
<td>User Service</td>
<td>Quáº£n lÃ½ ngÆ°á»i dÃ¹ng, phÃ¢n quyá»n Ä‘á»™ng RBAC, tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng</td>
<td><a href="interfaces/ic-09-user-service/"><code>ic-09-user-service.md</code></a></td>
</tr>
</tbody>
</table>
<p>ğŸ“Œ Má»—i IC cÃ³ thá»ƒ bao gá»“m:
- MÃ´ táº£ cÃ¡c API endpoint hoáº·c UI behavior chÃ­nh
- CÃ¡c schema (request/response)
- Quy táº¯c RBAC Ã¡p dá»¥ng náº¿u cÃ³
- Link tham chiáº¿u Ä‘áº¿n cÃ¡c ADR hoáº·c schema dÃ¹ng chung</p>
<hr/>
<h2 id="phu-luc-e-huong-dan-ong-gop-phat-trien">Phá»¥ lá»¥c E â€“ HÆ°á»›ng dáº«n Ä‘Ã³ng gÃ³p &amp; phÃ¡t triá»ƒn<a class="headerlink" href="#phu-luc-e-huong-dan-ong-gop-phat-trien" title="Permanent link">Â¶</a></h2>
<ul>
<li>Quy trÃ¬nh pull request &amp; review code táº¡i: <code>CONTRIBUTING.md</code></li>
<li>Coding style: theo PEP8 + Black (Python), ESLint (JS)</li>
<li>Test coverage yÃªu cáº§u: â‰¥ 85% unit, â‰¥ 70% integration</li>
<li>
<p>Luá»“ng CI/CD:</p>
</li>
<li>
<p>Push code â†’ CI cháº¡y lint/test/scan</p>
</li>
<li>Merge vÃ o <code>dev</code> â†’ Deploy Staging</li>
<li>Merge vÃ o <code>main</code> â†’ Require approval â†’ Deploy Production</li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Trá»Ÿ láº¡i má»¥c lá»¥c
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.code.annotate", "content.tabs.link"], "search": "assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u0110\u00e3 sao ch\u00e9p", "clipboard.copy": "Sao ch\u00e9p v\u00e0o b\u1ed9 nh\u1edb t\u1ea1m", "search.result.more.one": "1 t\u1eeb kh\u00e1c trong trang", "search.result.more.other": "# t\u1eeb kh\u00e1c trong trang", "search.result.none": "Kh\u00f4ng t\u00ecm th\u1ea5y t\u00e0i li\u1ec7u li\u00ean quan", "search.result.one": "1 t\u00e0i li\u1ec7u li\u00ean quan", "search.result.other": "# t\u00e0i li\u1ec7u li\u00ean quan", "search.result.placeholder": "Nh\u1eadp \u0111\u1ec3 b\u1eaft \u0111\u1ea7u t\u00ecm ki\u1ebfm", "search.result.term.missing": "Kh\u00f4ng", "select.version": "Ch\u1ecdn phi\u00ean b\u1ea3n"}, "version": null}</script>
<script src="assets/javascripts/bundle.13a4f30d.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body>
</html>